(self.webpackChunkgordan404wiki=self.webpackChunkgordan404wiki||[]).push([[108],{782:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-05c6f081",path:"/interview/react.html",title:"组前端进阶指北",lang:"zh-CN",frontmatter:{sidebar:"auto"},excerpt:"",headers:[{level:2,title:"React基础",slug:"react基础",children:[{level:3,title:"什么是 React",slug:"什么是-react",children:[]},{level:3,title:"React的生命周期",slug:"react的生命周期",children:[]},{level:3,title:"React 父子组件生命周期",slug:"react-父子组件生命周期",children:[]},{level:3,title:"为什么React中事件绑定的函数内部this默认指向undefined",slug:"为什么react中事件绑定的函数内部this默认指向undefined",children:[]},{level:3,title:"浅谈React合成",slug:"浅谈react合成",children:[]},{level:3,title:"React 组件中怎么做事件代理",slug:"react-组件中怎么做事件代理",children:[]},{level:3,title:"setState",slug:"setstate",children:[]},{level:3,title:"组件的状态(state)和属性(props)之间有何不同",slug:"组件的状态-state-和属性-props-之间有何不同",children:[]}]},{level:2,title:"React 进阶",slug:"react-进阶",children:[{level:3,title:"受控和非受控组",slug:"受控和非受控组",children:[]},{level:3,title:"类组件和函数组件(无状态)之间的区别",slug:"类组件和函数组件-无状态-之间的区别",children:[]},{level:3,title:"Portals(传送门)",slug:"portals-传送门",children:[]},{level:3,title:"context(上下文)",slug:"context-上下文",children:[]},{level:3,title:"异步组件",slug:"异步组件",children:[]},{level:3,title:"高阶组件 HOC",slug:"高阶组件-hoc",children:[]},{level:3,title:"Render Props",slug:"render-props",children:[]},{level:3,title:"HOC vs Render Props 区别",slug:"hoc-vs-render-props-区别",children:[]},{level:3,title:"React性能优化",slug:"react性能优化",children:[]},{level:3,title:"React组件通讯",slug:"react组件通讯",children:[]}]},{level:2,title:"Redux 和 React-Redux",slug:"redux-和-react-redux",children:[{level:3,title:"React-Redux",slug:"react-redux",children:[]},{level:3,title:"Redux 中间件",slug:"redux-中间件",children:[]}]},{level:2,title:"React 原理",slug:"react-原理",children:[{level:3,title:"函数式编程",slug:"函数式编程",children:[]},{level:3,title:"Vdom 和 diff算法",slug:"vdom-和-diff算法",children:[]},{level:3,title:"JSX本质",slug:"jsx本质",children:[]},{level:3,title:"setState 和 batchUpdate",slug:"setstate-和-batchupdate",children:[]},{level:3,title:"transaction(交易)事物机制",slug:"transaction-交易-事物机制",children:[]},{level:3,title:"组件渲染和更新过程",slug:"组件渲染和更新过程",children:[]},{level:3,title:"React-fiber",slug:"react-fiber",children:[]},{level:3,title:"Vue 和 React一些区别",slug:"vue-和-react一些区别",children:[]}]}],filePathRelative:"interview/react.md",git:{updatedTime:163812294e4,contributors:[{name:"lishuaixingNewBee",email:"vae.china@foxmail.com",commits:15}]}}},7637:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>Xn});var t=a(4057);const o=a.p+"assets/img/37.1d25cb01.png",e=a.p+"assets/img/38.ab69e805.jpg",c=a.p+"assets/img/39.b080230f.gif",p=a.p+"assets/img/41.7f853398.jpg",k=a.p+"assets/img/42.68c1e2f5.jpg",l=a.p+"assets/img/43.4f1b0aee.jpg",m=a.p+"assets/img/45.1313d1e0.png",u=a.p+"assets/img/44.59ceb365.png",W=(0,t.Wm)("h1",{id:"组前端进阶指北",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#组前端进阶指北","aria-hidden":"true"},"#"),(0,t.Uk)(" 组前端进阶指北")],-1),r=(0,t.Wm)("h2",{id:"react基础",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react基础","aria-hidden":"true"},"#"),(0,t.Uk)(" React基础")],-1),i=(0,t.Wm)("h3",{id:"什么是-react",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#什么是-react","aria-hidden":"true"},"#"),(0,t.Uk)(" 什么是 React")],-1),U=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"React是Facebook 开发的前端JavaScript库"),(0,t.Wm)("li",null,"V层：react并不是完整的MVC框架，而是MVC中的C层"),(0,t.Wm)("li",null,"虚拟DOM：react引入虚拟DOM，每当数据变化通过reactdiff运算，将上一次的虚拟DOM与本次渲染的DOM进行对比，仅仅只渲染更新的，有效减少了DOM操作"),(0,t.Wm)("li",null,"JSX语法：js+xml，是js的语法扩展，编译后转换成普通的js对象"),(0,t.Wm)("li",null,"组件化思想：将具有独立功能的UI模块封装为一个组件，而小的组件又可以通过不同的组合嵌套组成大的组件，最终完成整个项目的构建"),(0,t.Wm)("li",null,"单向数据流：指数据的流向只能由父级组件通过props讲数据传递给子组件，不能由子组件向父组件传递数据"),(0,t.Wm)("li",null,"要想实现数据的双向绑定只能由子组件接收父组件props传过来的方法去改变父组件数据，而不是直接将子组件数据传给父组件"),(0,t.Wm)("li",null,"生命周期：简单说一下生命周期：Mounting(挂载)、Updateing(更新)、Unmounting(卸载)")])],-1),d=(0,t.Wm)("h3",{id:"react的生命周期",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react的生命周期","aria-hidden":"true"},"#"),(0,t.Uk)(" React的生命周期")],-1),h=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:o,alt:"React的生命周期"})],-1),f=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("创建、 更新、 销毁三个阶段 "),(0,t.Wm)("code",null,"componentDidMount"),(0,t.Uk)(" => "),(0,t.Wm)("code",null,"componentDidUpdate"),(0,t.Uk)(" => "),(0,t.Wm)("code",null,"componentWillUnmount")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"创建阶段："),(0,t.Uk)(" 旧版本组件构造函数调用完成之后会有"),(0,t.Wm)("code",null,"componentWillmount"),(0,t.Uk)("方法，新版本省略，新增"),(0,t.Wm)("code",null,"getDerivedStateFromProps"),(0,t.Uk)("方法（并不常用），且该方法在组件props,state变更时也会被调用")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"更新阶段:"),(0,t.Uk)(" 当"),(0,t.Wm)("code",null,"shouldComponentUpdate"),(0,t.Uk)("返回ture后，会调用rende方法重新渲染组件。在组件更新完成之前有"),(0,t.Wm)("code",null,"getSnapShotBeforeUpdate"),(0,t.Uk)("方法")])]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentWillMount")]),(0,t.Uk)("(16.9废弃):在渲染之前执行，用于根组件中的 App 级配置。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentDidMount")]),(0,t.Uk)("：在第一次渲染之后执行，可以在这里做AJAX请求，DOM 的操作或状态更新以及设置事件监听器。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentWillReceiveProps")]),(0,t.Uk)("(废弃)：在初始化render的时候不会执行，它会在组件接受到新的状态(Props)时被触发，一般用于父组件状态更新时子组件的重新渲染, "),(0,t.Wm)("code",null,"getDerivedStateFromProps"),(0,t.Uk)("可替代")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"getDerivedStateFromProps")]),(0,t.Uk)("：会在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。它应返回一个对象来更新 state，如果返回 null 则不更新任何内")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"shouldComponentUpdate")]),(0,t.Uk)("：确定是否更新组件。默认情况下，它返回true。如果确定在 state 或 props 更新后组件不需要在重新渲染，则可以返回false，这是一个提高性能的方法。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentWillUpdate")]),(0,t.Uk)("(废弃)：在shouldComponentUpdate返回 true 确定要更新组件之前件之前执行。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentDidUpdate")]),(0,t.Uk)("：它主要用于更新DOM以响应props或state更改。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"componentWillUnmount")]),(0,t.Uk)("：创建、 更新、 销毁三个阶段，它用于取消任何的网络请求，或删除与组件关联的所有事件监听")])])],-1),g=(0,t.Wm)("h3",{id:"react-父子组件生命周期",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-父子组件生命周期","aria-hidden":"true"},"#"),(0,t.Uk)(" React 父子组件生命周期")],-1),y=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 加载渲染过程"),(0,t.Uk)("\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("constructor\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillMount\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("render\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("constructor\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillMount\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("render\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentDidMount\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentDidMount\n"),(0,t.Wm)("span",{class:"token comment"},"// 更新过程"),(0,t.Uk)("\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("shouldComponentUpdate\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillUpdate\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("render\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillReceiveProps\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("shouldComponentUpdate\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("render\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentDidUpdate\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentDidUpdate\n"),(0,t.Wm)("span",{class:"token comment"},"// 卸载组件"),(0,t.Uk)("\n  parent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillUnmount\n    child"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("componentWillUnmount\n")])])],-1),w=(0,t.Wm)("h3",{id:"为什么react中事件绑定的函数内部this默认指向undefined",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#为什么react中事件绑定的函数内部this默认指向undefined","aria-hidden":"true"},"#"),(0,t.Uk)(" 为什么React中事件绑定的函数内部this默认指向undefined")],-1),v=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"函数的作用域是由函数调用的时候决定的，而不是函数声明的时候。第一次调用是作为对象中的函数调用，因此this指向对象本身。而第二次调用是作为普通函数调用，所以this指向全局对象，在严格模式时会指向undefined。"),(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"解决办法：")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("使用es6箭头函数，箭头函数this默认指向上一层级的环境 "),(0,t.Wm)("code",null,"<input onChange={()=>this.change()} />")]),(0,t.Wm)("li",null,[(0,t.Uk)("使用bind绑定this写在constructor里 "),(0,t.Wm)("code",null,"this.change = this.change.bind(this)"),(0,t.Uk)(";")])])],-1),x=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" name "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Gordanlee'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" obj "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Wuyifan'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"getName"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" getName "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" obj"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("getName"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nobj"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getName"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// Wuyifan"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"getName"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// Gordanlee"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"EventDemo"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'gordanlee'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 修改方法的 this 指向"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clickHandler2 "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"clickHandler2"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"bind"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        推荐面这种写法\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"clickHandler1"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'this....'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// this 默认是 undefined"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'wuyifan'"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 静态方法，this 指向当前实例"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"clickHandler2"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 获取 event"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"clickHandler3"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// // this - 使用 bind"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" \n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clickHandler1"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token comment"},"// 不建议在标签中写bind, 会导致bind多次执行，建议再头部赋值只绑一次"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"clickHandler2"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"bind"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"clickHandler2"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clickHandler3"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),b=(0,t.Wm)("h3",{id:"浅谈react合成",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#浅谈react合成","aria-hidden":"true"},"#"),(0,t.Uk)(" 浅谈React合成")],-1),R=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:e,alt:"浅谈React合成"})],-1),C=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"JSX"),(0,t.Uk)("上写的事件并没有绑定在对应的真实 "),(0,t.Wm)("code",null,"DOM"),(0,t.Uk)(" 上，而是通过事件代理的方式，将所有的事件都统一绑定在了 "),(0,t.Wm)("code",null,"document"),(0,t.Uk)("上。这样的方式不仅减少了内存消耗，还能在组件挂载销毁时统一订阅和移除事件。 （在"),(0,t.Wm)("code",null,"React17"),(0,t.Uk)("之前，"),(0,t.Wm)("code",null,"React"),(0,t.Uk)("是把所有事件委托在"),(0,t.Wm)("code",null,"document"),(0,t.Uk)("上的，"),(0,t.Wm)("code",null,"React17"),(0,t.Uk)("及以后版本不再把事件委托在"),(0,t.Wm)("code",null,"document"),(0,t.Uk)("上，而是委托在挂载的容器上了。）")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"目的:")])]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"合成事件首先抹平了浏览器之间的兼容问题(如标准事件模型、IE)，另外这是一个跨浏览器原生事件包装器，赋予了跨浏览器开发的能力；"),(0,t.Wm)("li",null,"对于原生浏览器事件来说，浏览器会给监听器创建一个事件对象。如果你有很多的事件监听，那么就需要分配很多的事件对象，造成高额的内存分配问题。但是对于合成事件来说，有一个事件池专门来管理它们的创建和销毁，当事件需要被使用时，就会从池子中复用对象，事件回调结束后，就会销毁事件对象上的属性，从而便于下次复用事件对象")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"优点")])]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"兼容所有浏览器(如标准事件模型、IE)，更好的跨平台(各平台都有自己的事件名)； 2.挂载到document,将事件统一存放在一个数组,减少内存消耗,避免频繁的新增与解绑（垃圾回收）。"),(0,t.Wm)("li",null,"方便 react 统一管理和事务机制")])],-1),S=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 定义捕获事件"),(0,t.Uk)("\nVue"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div @click"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("capture"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},'"handleClick"'),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\nReact"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div onClickCapture"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("onClickOuter"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// react 事件不能采用 return false 的方式来阻止浏览器的默认行为，而必须要地明确地调用preventDefault()来阻止默认行为。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// `Event` 是封装组合之后的 `SyntheticBaseEvent`, 模拟出来的DOM事件所有能力。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// `event.nativeEvent` 是原生事件对象"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// React绑定事件，最后都会追加Eevent参数"),(0,t.Uk)("\n")])])],-1),T=(0,t.Wm)("h3",{id:"react-组件中怎么做事件代理",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-组件中怎么做事件代理","aria-hidden":"true"},"#"),(0,t.Uk)(" React 组件中怎么做事件代理")],-1),P=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"React基于Virtual DOM实现了一个SyntheticEvent层（合成事件层），定义的事件处理器会接收到一个合成事件对象的实例，它符合W3C标准，且与原生的浏览器事件拥有同样的接口，支持冒泡机制，所有的事件都自动绑定在最外层上。 在React底层，主要对合成事件做了两件事："),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"事件委派： React会把所有的事件绑定到结构的最外层，使用统一的事件监听器，这个事件监听器上维持了一个映射来保存所有组件内部事件监听和处理函数。"),(0,t.Wm)("li",null,"自动绑定： React组件中，每个方法的上下文都会指向该组件的实例，即自动绑定this为当前组件。")])],-1),M=(0,t.Wm)("h3",{id:"setstate",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#setstate","aria-hidden":"true"},"#"),(0,t.Uk)(" setState")],-1),j=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"不可变值(为了性能优化,不去触发shouldComponentUpdate)"),(0,t.Wm)("li",null,"可能是异步更新")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"异步： 在 React 可以控制的地方，就为 true，比如在 React 生命周期事件和合成事件中，都会走合并操作，延迟更新的策略。"),(0,t.Wm)("li",null,"同步： 在 React 无法控制的地方，比如原生事件，具体就是在 addEventListener 、setTimeout、setInterval 等事件中，就只能同步更新。")]),(0,t.Wm)("ol",{start:"3"},[(0,t.Wm)("li",null,"可能会被合并")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"setState()"),(0,t.Uk)(" 传递对象就会被合并（类似Object.assign），传递函数则不会被合并")]),(0,t.Wm)("li",null,[(0,t.Uk)("setState是否同步，看是否能命中"),(0,t.Wm)("code",null,"bacthUpdate"),(0,t.Uk)("机制，判断"),(0,t.Wm)("code",null,"isBatchingUpdates")])])],-1),D=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"StateDemo"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n        "),(0,t.Wm)("span",{class:"token comment"},"// 第一，state 要在构造函数中定义"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("increase"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("累加"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"increase"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// this.state.count++ // 错误的写法"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// setState 一定要用不可变值了"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 只能用setState去修改值，禁止提前修改值，会导致shouldComponentUpdat中nextProps, nextState 相等"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// SCU"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n         console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'callback'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 1 异步获取"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// this.setState 是异步的，如果立刻同步获取是拿不到最新修改的值，需要用setState第二个参数会调函数中获取, 联想 Vue $nextTick - DOM"),(0,t.Uk)("\n        console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'同步获取'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 0 "),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 操作数组、对象的的常用形式"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"100"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n          console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'setTimeout'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 100"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"increase2"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// state 异步更新前会被合并"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"let"),(0,t.Uk)(" index "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(" index "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token operator"},"++"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// setState传入对象,会被合并（类似Object.assign）。执行结构只一次 + 1"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 0 + 1"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// "),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'for'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 1"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"increase3"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// state 异步更新前会被合并"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"let"),(0,t.Uk)(" index "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(" index "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token operator"},"++"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// setState传入函数不会被合并，结果为10，函数无法像对象一样被合并，只能被执行"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("prevState"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" props")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" prevState"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'for'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 0"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'for'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 10"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"bodyClickHandler"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'count in body event'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 最新的值"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"componentDidMount"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 自己定义的 DOM 事件，setState 是同步的"),(0,t.Uk)("\n        document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("bodyClickHandler"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"componentWillUnmount"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 及时销毁自定义 DOM 事件"),(0,t.Uk)("\n        document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"removeEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("bodyClickHandler"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// clearTimeout"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),I=(0,t.Wm)("h3",{id:"组件的状态-state-和属性-props-之间有何不同",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#组件的状态-state-和属性-props-之间有何不同","aria-hidden":"true"},"#"),(0,t.Uk)(" 组件的状态(state)和属性(props)之间有何不同")],-1),O=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"State 是一种数据结构，用于组件挂载时所需数据的默认值。State 可能会随着时间的推移而发生突变，但多数时候是作为用户事件行为的结果"),(0,t.Wm)("li",null,"Props(properties 的简写)则是组件的配置。props 由父组件传递给子组件，并且就子组件而言，props 是不可变的"),(0,t.Wm)("li",null,"组件不能改变自身的 props，但是可以把其子组件的 props 放在一起(统一管理)")])],-1),E=(0,t.Wm)("h2",{id:"react-进阶",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-进阶","aria-hidden":"true"},"#"),(0,t.Uk)(" React 进阶")],-1),A=(0,t.Wm)("h3",{id:"受控和非受控组",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#受控和非受控组","aria-hidden":"true"},"#"),(0,t.Uk)(" 受控和非受控组")],-1),V=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"受控组件："),(0,t.Uk)(" 控制着输入的过程，"),(0,t.Wm)("code",null,"react"),(0,t.Uk)("的"),(0,t.Wm)("code",null,"state"),(0,t.Uk)("为唯一的数据来源，被"),(0,t.Wm)("code",null,"react.state"),(0,t.Uk)("这样控制着的就是受控组件(相当于实现数据绑定)。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"非受控组件："),(0,t.Uk)(" 不设置value值(只能设置"),(0,t.Wm)("code",null,"defaultValue"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"defaultChecked"),(0,t.Uk)("),通过ref获取dom节点然后再取value值。在html表单中，input select checkbox，来暂存输入值,如果不需要关心控制值是怎么修改更新的，只需要获取这个组件的值，那么这个就是非受控组件。 "),(0,t.Wm)("strong",null,"非受控组件使用场景：")])]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("必须手动操作DOM元素，"),(0,t.Wm)("code",null,"setState"),(0,t.Uk)("实现不了。")]),(0,t.Wm)("li",null,[(0,t.Uk)("文件上传"),(0,t.Wm)("code",null,'<input type="file">')]),(0,t.Wm)("li",null,"开始或使用某些富文本编辑器、需要传入DOM 元素")])],-1),H=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'gordanlee'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            flag"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("nameInputRef "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createRef"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 创建 ref"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("fileInputRef "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createRef"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// // input defaultValue"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token comment"},"/* 使用 defaultValue 而不是 value ，使用 ref */"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("input defaultValue"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" ref"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("nameInputRef"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token comment"},"/* state 并不会随着改变 */"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("br"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("alertName"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("alert name"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// // checkbox defaultChecked"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// return <div>"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"//     <input"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},'//         type="checkbox"'),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"//         defaultChecked={this.state.flag}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"//     />"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// </div>"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// file"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// return <div>"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},'//     <input type="file" ref={this.fileInputRef}/>'),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"//     <button onClick={this.alertFile}>alert file</button>"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// </div>"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"alertName"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" elem "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("nameInputRef"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("current "),(0,t.Wm)("span",{class:"token comment"},"// 通过 ref 获取 DOM 节点"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"alert"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("elem"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 不是 this.state.name"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"alertFile"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" elem "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("fileInputRef"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("current "),(0,t.Wm)("span",{class:"token comment"},"// 通过 ref 获取 DOM 节点"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"alert"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("elem"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("files"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),N=(0,t.Wm)("h3",{id:"类组件和函数组件-无状态-之间的区别",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#类组件和函数组件-无状态-之间的区别","aria-hidden":"true"},"#"),(0,t.Uk)(" 类组件和函数组件(无状态)之间的区别")],-1),_=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"类组件: 可以使用其他特性，如状态 state 和生命周期钩子。"),(0,t.Wm)("li",null,"函数组件: 当组件只是接收 props 渲染到页面时，就是无状态组件，就属于函数组件，也被称为哑组件或展示组件")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"函数组件的性能比类组件的性能要高，因为类组件使用的时候要实例化，而函数组件直接执行函数取返回结果即可,为了提高性能，尽量使用函数组"),(0,t.Wm)("li",null,[(0,t.Uk)("函数组件无实例、无"),(0,t.Wm)("code",null,"this"),(0,t.Uk)("、无状态state,无生命周期不能扩展其他方法。")]),(0,t.Wm)("li",null,"函数组件获取的总是事件发生的时候的值，即使值在事件发生后已经更新了,而类组件获取的总是最新的值。")])],-1),F=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"//函数组件传参"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"CounterFunction"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" count "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" props"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"showAlert"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token function"},"alert"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'--from Function'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3000"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("You clicked "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" times"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("showAlert"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("Show count"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"//类组件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"CounterClass"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"showAlert"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token function"},"alert"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'--from Class'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3000"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("He clicked "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" times"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"showAlert"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"bind"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                  Show count\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        count "),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"123"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div className"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},'"App"'),(0,t.Uk)(" onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"456"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("CounterFunction count"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("CounterClass count"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 当你两次调用的时候，你就会发现他们的页面渲染是相同的，count值都会变成456，但是，alert出来的值可就不一样了。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// Function的是123，Class的是456。所以当showAlert事件发生的时候，Function取的是发生前的值，是触发事件前的值，就像处对象，哪怕分手后，双方立刻找到了新对象，但仍然记得当初的美好"),(0,t.Uk)("\n")])])],-1),B=(0,t.Wm)("h3",{id:"portals-传送门",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#portals-传送门","aria-hidden":"true"},"#"),(0,t.Uk)(" Portals(传送门)")],-1),J=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("组件默认会按照既定层次嵌套渲染，Portal可以将React节点渲染到指定节点(如Dialog、Tooltip),vue2.x需要用"),(0,t.Wm)("code",null,"v-transfer-dom"),(0,t.Uk)(",Vue3.0x可以用"),(0,t.Wm)("code",null,"Teleport")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"父组件overflow:hidden"),(0,t.Wm)("li",null,"父组件z-index值太小"),(0,t.Wm)("li",null,"fixed 需要放在body第一层")])],-1),L=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("  "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// // 正常渲染"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},'// return <div className="modal">'),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"//     {this.props.children} {/* vue slot */}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// </div>"),(0,t.Uk)("\n\n      "),(0,t.Wm)("span",{class:"token comment"},"// 使用 Portals 渲染到 body 上。"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// fixed 元素要放在 body 上，有更好的浏览器兼容性。"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" ReactDOM"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createPortal"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div className"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},'"modal"'),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("children"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body "),(0,t.Wm)("span",{class:"token comment"},"// DOM 节点"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),X=(0,t.Wm)("h3",{id:"context-上下文",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#context-上下文","aria-hidden":"true"},"#"),(0,t.Uk)(" context(上下文)")],-1),q=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"React context的api解决的问题是祖先元素与子孙元素的通信问题。"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"用props太繁琐,层级过深不友好"),(0,t.Wm)("li",null,"用redux小题大做")])],-1),z=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" React "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 创建 Context 填入默认值（任何一个 js 变量）"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" ThemeContext "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createContext"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'欧美简约'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" ThemeContext2 "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createContext"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'呃玛西亚'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 底层组件 - 函数是组件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"ThemeLink"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// const theme = this.context // 会报错。函数式组件没有实例，即没有 this"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 函数式组件可以使用 Consumer(消费)"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// Context多了很容易导致嵌套地狱。"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ThemeContext"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Consumer"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"value"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(" \n      "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("当前主题"),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("value"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ThemeContext2"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Consumer"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"value2"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("当前主题"),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("value2"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("ThemeContext2"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Consumer"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)(" \n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("ThemeContext"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Consumer"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// 底层组件 - class 组件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"ThemedButton"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 指定 contextType 读取当前的 theme context。"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// static contextType = ThemeContext // 也可以用 ThemedButton.contextType = ThemeContext"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" theme "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("context "),(0,t.Wm)("span",{class:"token comment"},"// React 会往上找到最近的 theme Provider，然后使用它的值。"),(0,t.Uk)("\n        console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'theme'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" theme"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("当前主题"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("theme"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\nThemedButton"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("contextType "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" ThemeContext "),(0,t.Wm)("span",{class:"token comment"},"// 指定 contextType 读取当前的 theme context。"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// 中间的组件再也不必指明往下传递 theme 了。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"Toolbar"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("background"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'yellow'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" padding"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'10px'"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            中间组件\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("background"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'pink'"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ThemedButton "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ThemeLink "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            theme"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'欧美简约'"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("background"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'red'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" padding"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'10px'"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ThemeContext"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Provider value"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("theme"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("Toolbar "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button onClick"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("changeTheme"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("切换主题"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("ThemeContext"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Provider"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function-variable function"},"changeTheme"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            theme"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("theme "),(0,t.Wm)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'城乡结合'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"?"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'欧美简约'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'城乡结合'"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" App\n")])])],-1),Y=(0,t.Wm)("h3",{id:"异步组件",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#异步组件","aria-hidden":"true"},"#"),(0,t.Uk)(" 异步组件")],-1),$=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"import()"),(0,t.Wm)("li",null,"React.lazy"),(0,t.Wm)("li",null,"React.Suspense")])],-1),G=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" React "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" ContextDemo "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"lazy"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'./ContextDemo'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("引入一个动态组件"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("hr "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Suspense fallback"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("Loading"),(0,t.Wm)("span",{class:"token operator"},"..."),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n                "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ContextDemo"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Suspense"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 1. 强制刷新，可看到 loading （看不到就限制一下 chrome 网速）"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token comment"},"// 2. 看 network 的 js 加载"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" App\n")])])],-1),K=(0,t.Wm)("h3",{id:"高阶组件-hoc",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#高阶组件-hoc","aria-hidden":"true"},"#"),(0,t.Uk)(" 高阶组件 HOC")],-1),Q=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"高阶组件不是一种功能，而是一种模式，类似应该是一个组件工厂、装饰器，获取低阶组件，生成高阶组件,简而言之，高阶组件就是一个函数，它接受一个组件为参数，返回一个新组件(如拉加载数据容器、播放器状态)。"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"代码复用，代码模块化"),(0,t.Wm)("li",null,"增删改props"),(0,t.Wm)("li",null,"渲染劫持")])],-1),Z=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// React-redux的connect也是一个高阶组件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" React "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 高阶组件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"HOCFactoryMouse"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"Component"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"withMouseComponent"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" x"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" y"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function-variable function"},"handleMouseMove"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          x"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" event"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clientX"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          y"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" event"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clientY\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" height"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'500px'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" background"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'pink'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" onMouseMove"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("handleMouseMove"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token comment"},"/* 1. 透传所有 props 2. 增加 mouse 属性 */"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token constant"},"JSON"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"stringify"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n              "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("Component "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token operator"},"..."),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" mouse"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" withMouseComponent\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" a "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("a\n    "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" x"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" y "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("mouse "),(0,t.Wm)("span",{class:"token comment"},"// 接收 mouse 属性"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" height"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'500px'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("h1"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("鼠标坐标"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("x"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("y"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("h1"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"HOCFactoryMouse"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("App"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 返回高阶函数"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},'// <HOCDemo a="100"/>'),(0,t.Uk)("\n")])])],-1),nn=(0,t.Wm)("h3",{id:"render-props",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#render-props","aria-hidden":"true"},"#"),(0,t.Uk)(" Render Props")],-1),sn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"组件接收一个函数，这个函数获取组件的state实现渲染逻辑(例如多个按钮，每个按钮点击会打开不同的Dialog,用Render Props就能写在一块)"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"接收一个外部传递进来的 props 属性"),(0,t.Wm)("li",null,"将内部的 state 作为参数传递给调用组件的 props 属性方法. 缺点: 它很容易导致嵌套地狱")])],-1),an=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" React "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" PropTypes "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'prop-types'"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Mouse"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("Component")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" x"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" y"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  \n    "),(0,t.Wm)("span",{class:"token function-variable function"},"handleMouseMove"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        x"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" event"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clientX"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        y"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" event"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("clientY\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  \n    "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" height"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'500px'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" onMouseMove"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("handleMouseMove"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token comment"},"/* 将当前 state 作为 props ，传递给 render （render 是一个函数组件） */"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\nMouse"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("propTypes "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    render"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" PropTypes"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("func"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("isRequired "),(0,t.Wm)("span",{class:"token comment"},"// 必须接收一个 render 属性，而且是函数"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"App"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div style"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" height"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'500px'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("p"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("Mouse render"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token comment"},"/* render 是一个函数组件 */"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" x"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" y "),(0,t.Wm)("span",{class:"token punctuation"},"}")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("h1"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token function"},"坐标"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("x"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("y"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("h1"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        \n    "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token doc-comment comment"},"/**\n * 即，定义了 Mouse 组件，只有获取 x y 的能力。\n * 至于 Mouse 组件如何渲染，App 说了算，通过 render prop 的方式告诉 Mouse 。\n */"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" App\n")])])],-1),tn=(0,t.Wm)("h3",{id:"hoc-vs-render-props-区别",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#hoc-vs-render-props-区别","aria-hidden":"true"},"#"),(0,t.Uk)(" HOC vs Render Props 区别")],-1),on=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"HOC: 模式简单，但会增加组件层级(高级组件嵌套当前组件)"),(0,t.Wm)("li",null,"Render Props: 代码简洁，学习成本较高，无法在 return 语句外访问数据，它很容易导致嵌套地狱。"),(0,t.Wm)("li",null,"按需使用")])],-1),en=(0,t.Wm)("h3",{id:"react性能优化",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react性能优化","aria-hidden":"true"},"#"),(0,t.Uk)(" React性能优化")],-1),cn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"渲染列表时加Key"),(0,t.Wm)("li",null,"自定义事件、DOM事件及时销毁"),(0,t.Wm)("li",null,"合理使用异步组件"),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"shouldComponentUpdate")]),(0,t.Uk)("(简称SCU): SCU 默认返回true,即React 默认重新渲染所有子组件，必须配合"),(0,t.Wm)("code",null,"不可变值"),(0,t.Uk)(" 一起使用，可先不用SCU,有性能问题时再按需使用")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"PureComponent(纯组件)"),(0,t.Uk)(" 和 "),(0,t.Wm)("code",null,"React.memo")]),(0,t.Uk)(":前者类组件，后者函数组组件，原理是，当组件更新时，如果组件的 "),(0,t.Wm)("code",null,"props"),(0,t.Uk)(" 和 "),(0,t.Wm)("code",null,"state"),(0,t.Uk)(" 都没发生改变， render 方法就不会触发，省去 "),(0,t.Wm)("code",null,"Virtual DOM"),(0,t.Uk)(" 的生成和比对过程，达到提升性能的目的。具体就是 React 自动帮我们做了一层浅比较(Object.keys只比较第一层,类似浅拷贝浅比较)")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"函数组件"),(0,t.Uk)(": 当一个组件只返回一个render建议使用函数组件,因为类组件使用的时候要实例化，而函数组件直接执行函数取返回结果即可,提高性能。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"immutable.js"),(0,t.Uk)("不可变值")]),(0,t.Uk)("：")])]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Uk)("React遵循"),(0,t.Wm)("code",null,"不可变值"),(0,t.Uk)("设计理念，中常要深拷贝(性能消耗大)一份数据,再"),(0,t.Wm)("code",null,"setState"),(0,t.Uk)(",使用"),(0,t.Wm)("code",null,"immutable"),(0,t.Uk)("可彻底拥抱"),(0,t.Wm)("code",null,"不可变值"),(0,t.Uk)(",基于共享数据（不是深拷贝）,速度快,但有一定的学习和迁移成本，按需使用。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"immutable"),(0,t.Uk)("数据一种利用结构共享形成的持久化数据结构，一旦有部分被修改，那么将会返回一个全新的对象，并且原来相同的节点会直接共享")])]),(0,t.Wm)("ol",{start:"5"},[(0,t.Wm)("li",null,[(0,t.Uk)("公共组件抽离,提取公共逻辑，降低耦合度，如"),(0,t.Wm)("code",null,"minxin"),(0,t.Uk)("(弃用)、高阶组件HOC、Render Props")])])],-1),pn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:c,alt:"immutable"})],-1),kn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"shouldComponentUpdate"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("nextProps"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextState")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// _.isEqual 做对象或者数组的深度比较（一次性递归到底）"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// 1.isEqual 是个一次性深度递归到底，所以慎用"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// 2. react 提供了PureComponent、memo 做浅比较"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("_"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"isEqual"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextProps"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("list"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("list"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token comment"},"// 相等，则不重复渲染"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 不相等，则渲染"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function-variable function"},"handleAdd"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"name"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 正确的用法"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      list"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token operator"},"..."),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("list"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        id"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token template-string"},[(0,t.Wm)("span",{class:"token template-punctuation string"},"`"),(0,t.Wm)("span",{class:"token string"},"id-"),(0,t.Wm)("span",{class:"token interpolation"},[(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("Date"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"now"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t.Wm)("span",{class:"token template-punctuation string"},"`")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        name"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token doc-comment comment"},"/** 为了演示 SCU ，故意写的错误用法 **/"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("list"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"push"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 直接修改原值，而不是用的setState"),(0,t.Uk)("\n        id"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token template-string"},[(0,t.Wm)("span",{class:"token template-punctuation string"},"`"),(0,t.Wm)("span",{class:"token string"},"id-"),(0,t.Wm)("span",{class:"token interpolation"},[(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("Date"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"now"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t.Wm)("span",{class:"token template-punctuation string"},"`")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        title\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 导致shouldComponentUpdate中 nextProps 和 nextState相当，"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 如果正好做了判断，会导致不渲染"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" \n        list"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("list\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token doc-comment comment"},"/**PureComponent**/"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"ListOfWords"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("PureComponent")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("words"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"','"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token doc-comment comment"},"/**memo**/"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"MyComponent"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"/* 使用 props 渲染 */"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"areEqual"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("prevProps"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextProps")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"/*\n  如果把 nextProps 传入 render 方法的返回结果与\n  将 prevProps 传入 render 方法的返回结果一致则返回 true，\n  否则返回 false\n  */"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"memo"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("MyComponent"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" areEqual"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token doc-comment comment"},"/**immutable**/"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" Map"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" List "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'immutable'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" map1 "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"Map"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" a"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" c"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" d"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" map2 "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"Map"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" c"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" a"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"20"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" t"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"30"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" obj "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" d"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"100"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" o"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"200"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" g"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"300"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" map3 "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" map1"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"merge"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("map2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" obj"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token comment"},"// Map { a: 20, b: 2, c: 10, d: 100, t: 30, o: 200, g: 300 }const list1 = List([ 1, 2, 3 ]);const list2 = List([ 4, 5, 6 ]);const list3 = list1.concat(list2, array);"),(0,t.Uk)("\n")])])],-1),ln=(0,t.Wm)("h3",{id:"react组件通讯",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react组件通讯","aria-hidden":"true"},"#"),(0,t.Uk)(" React组件通讯")],-1),mn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"props"),(0,t.Uk)(": [父子组件] 回调函数")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Context"),(0,t.Uk)(": [跨组件层级] 导入并调用"),(0,t.Wm)("code",null,"createContext"),(0,t.Uk)("方法，从结果中解构出 "),(0,t.Wm)("code",null,"Provider"),(0,t.Uk)(", "),(0,t.Wm)("code",null,"Consumer"),(0,t.Uk)(" 组件")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"redux"),(0,t.Uk)(": redux、mobx等的状态管理工具")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"evnet Bus"),(0,t.Uk)(": 事件总线")])])],-1),un=(0,t.Wm)("h2",{id:"redux-和-react-redux",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#redux-和-react-redux","aria-hidden":"true"},"#"),(0,t.Uk)(" Redux 和 React-Redux")],-1),Wn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:p,alt:"Redux"})],-1),rn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"redux是的诞生是为了给 React 应用提供「可预测化的状态管理」机制。"),(0,t.Wm)("li",null,"Redux会将整个应用状态(其实也就是数据)存储到到一个地方，称为store"),(0,t.Wm)("li",null,"这个store里面保存一棵状态树(state tree)"),(0,t.Wm)("li",null,"组件改变state的唯一方法是通过调用store的dispatch方法，触发一个action，这个action被对应的reducer处理，于是state完成更新"),(0,t.Wm)("li",null,"组件可以派发(dispatch)行为(action)给store,而不是直接通知其它组件"),(0,t.Wm)("li",null,"其它组件可以通过订阅store中的状态(state)来刷新自己的视图")])],-1),Un=(0,t.Wm)("h3",{id:"react-redux",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-redux","aria-hidden":"true"},"#"),(0,t.Uk)(" React-Redux")],-1),dn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"store"),(0,t.Uk)(" store就是把action和reducer联系到一起的对象，store本质上是一个状态树，保存了所有对象的状态。任何UI组件都可以直接从store访问特定对象的状态")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"Action"),(0,t.Uk)(" 是把数据从应用传到 store 的有效载荷,它是 store 数据的唯一来源,一般来说你会通过 store.dispatch() 将 action 传到 store。")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"reducer"),(0,t.Uk)(" 指定了应用状态的变化如何响应 actions并发送到 store 的，记住 actions 只是描述了有事情发生了这一事实，并没有描述应用如何更新 state")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"Provider"),(0,t.Uk)(" 其实就只是一个外层容器，它的作用就是通过配合 connect 来达到跨层级传递数据。使用时只需将Provider定义为整个项目最外层的组件，并设置好store。那么整个项目都可以直接获取这个store。它的原理其实是通过React中的"),(0,t.Wm)("a",{href:""},"Context"),(0,t.Uk)("来实现的")]),(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"connect"),(0,t.Uk)(" 的作用是连接React组件与 Redux store，它包在我们的容器组件的外一层，它接收上面 Provider 提供的 store 里面的 state 和 dispatch，传给一个构造函数，返回一个对象，以属性形式传给我们的容器组件")])]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"mapStateToProps"),(0,t.Uk)(" 的作用是将store里的state")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"mapDispatchToProps"),(0,t.Uk)(" 的作用是将store里的action（操作数据的方法）绑定到指定组件的props中")])])],-1),hn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token doc-comment comment"},"/** Redux **/"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// Redux主要通过subscribe订阅事件"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// constructor(){"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"//   this.state = store.getState();"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// }"),(0,t.Uk)("\nstore"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"subscribe"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("listener"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"listerner"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"let"),(0,t.Uk)(" newState "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" store"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  component"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("newState"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("   \n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token doc-comment comment"},"/** react-redux **/"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// App.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" store "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./reducers'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" App "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./components/App'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" Provider "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react-redux'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// Provider:提供器，将store提供给子组件使用"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("Provider store"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("store"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("App "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("Provider"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// store.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" store "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"createStore"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("reducers"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// const defaultState = {"),(0,t.Uk)("\n  name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'gordanlee'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  list"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"3"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// reducers/userInfo"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"userInfo"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("state "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" defaultState"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" action")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// state: 上一次store中的数据 action:"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"switch"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("action"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"case"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'SET_NAME'"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// 注意，返回不可变数据,reducers 可以接受state,不可以直接修改"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"..."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" action"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("value\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" state\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" userInfo\n"),(0,t.Wm)("span",{class:"token comment"},"// actions"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 设置名字"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"SET_NAME"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"value"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    type"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'SET_NAME'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    value\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// reducers"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" reducers "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"combineReducers"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("reducers"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// App.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" React"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" Component "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" connect "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'react-redux'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token constant"},"SET_NAME"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'../actions'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Form"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"extends"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Component"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"constructor"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"super"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("input value"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("userInfo"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" onChange"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("handleSetName"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("提交"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("button"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("ul"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("li"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("userInfo"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("li"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("ul"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"mapStateToProps"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"state"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 把store中的数据映射成组件的Props"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    userInfo"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("userInfo\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// store.dispatch方法映射到Props中"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"mapDispatchToProps"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"dispatch"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"handleSetName"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"e"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"dispatch"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token constant"},"SET_NAME"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("e"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("target"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("value"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// connect 让组件和store做连接"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"connect"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("mapStateToProps"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" mapDispatchToProps"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Form"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])])],-1),fn=(0,t.Wm)("h3",{id:"redux-中间件",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#redux-中间件","aria-hidden":"true"},"#"),(0,t.Uk)(" Redux 中间件")],-1),gn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:k,alt:"中间件"})],-1),yn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"dispatch"),(0,t.Uk)("一个"),(0,t.Wm)("code",null,"action"),(0,t.Uk)("之后，到达"),(0,t.Wm)("code",null,"reducer"),(0,t.Uk)("之前，进行一些额外的操作，就需要用到"),(0,t.Wm)("code",null,"middleware"),(0,t.Uk)("。 可以利用 "),(0,t.Wm)("code",null,"Redux middleware"),(0,t.Uk)(" 来进行日志记录、创建崩溃报告、调用异步接口或者路由等等,Redux store默认仅支持同步数据流,使用 thunk中间件 可以帮助在 Redux 应用中实现 异步的reducer(redux-thunk、redux-promise、redux-saga)")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"调动dispatch派发一个新 action 对象"),(0,t.Wm)("li",null,"调用 getState 获得当前 Redux Store 上的状态"),(0,t.Wm)("li",null,"调用 next 告诉 Redux 当前中间件工作完毕，让 Redux 调用下一个中间件"),(0,t.Wm)("li",null,"访问 action 对象 action 上的所有数据")])],-1),wn=(0,t.Uk)("函数柯里化"),vn={href:"https://www.jianshu.com/p/2975c25e4d71",target:"_blank",rel:"noopener noreferrer"},xn=(0,t.Uk)("函数柯里化"),bn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 函数柯里化 多参函数->单参函数"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 在官方的示例中，有一个logger实现的示例"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"logger"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token parameter"},"store"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token parameter"},"next"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token parameter"},"action"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'prev state'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("store"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"//获取状态数据"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'dispatch'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("action"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"let"),(0,t.Uk)(" result "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"next"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("action"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'next state'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("store"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" result"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"createThunkMiddleware"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"extraArgument"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" dispatch"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" getState "),(0,t.Wm)("span",{class:"token punctuation"},"}")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token parameter"},"next"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token parameter"},"action"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" action "),(0,t.Wm)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'function'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"action"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("dispatch"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" getState"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" extraArgument"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"next"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("action"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" thunk "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"createThunkMiddleware"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nthunk"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("withExtraArgument "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" createThunkMiddleware"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" thunk"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Rn=(0,t.Wm)("h2",{id:"react-原理",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-原理","aria-hidden":"true"},"#"),(0,t.Uk)(" React 原理")],-1),Cn=(0,t.Wm)("h3",{id:"函数式编程",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#函数式编程","aria-hidden":"true"},"#"),(0,t.Uk)(" 函数式编程")],-1),Sn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("函数式编程是声明式编程的一部分。javascript中的函数是第一类公民，这意味着函数是数据，你可以像保存变量一样在应用程序中保存、检索和传递这些函数。 "),(0,t.Wm)("strong",null,"函数式编程有些核心的概念，如下：")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"不可变性(Immutability)"),(0,t.Wm)("li",null,"纯函数(Pure Functions)"),(0,t.Wm)("li",null,"数据转换(Data Transformations)"),(0,t.Wm)("li",null,"高阶函数 (Higher-Order Functions)"),(0,t.Wm)("li",null,"递归"),(0,t.Wm)("li",null,"组合")])],-1),Tn=(0,t.Wm)("h3",{id:"vdom-和-diff算法",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#vdom-和-diff算法","aria-hidden":"true"},"#"),(0,t.Uk)(" Vdom 和 diff算法")],-1),Pn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"diff（翻译差异）：计算一棵树形结构转换成另一棵树形结构的最少操作"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"参照vue Vdom 和 diff算法, 两者实现vdom细节都不同，核心概念和实现思路一致。")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"把树形结构按照层级分解，只比较同级元素"),(0,t.Wm)("li",null,"给列表结构的每个单元添加唯一的 key 属性，方便比较"),(0,t.Wm)("li",null,"React 只会匹配相同 class 的 component（这里面的 class 指的是组件的名字）"),(0,t.Wm)("li",null,"合并操作，调用 component 的 setState 方法的时候, React 将其标记为 dirty.到每一个事件循环结束, React 检查所有标记 dirty 的 component 重新绘制"),(0,t.Wm)("li",null,"选择性子树渲染。开发人员可以重写 shouldComponentUpdate 提高 diff 的性能")])],-1),Mn=(0,t.Wm)("h3",{id:"jsx本质",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#jsx本质","aria-hidden":"true"},"#"),(0,t.Uk)(" JSX本质")],-1),jn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"JSX等同于Vue模板,Vue模板不是html"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"React.createElement 即h函数，返回vnode"),(0,t.Wm)("li",null,"第一个参数，可能是组件，也可能是html tag"),(0,t.Wm)("li",null,"组件名首字母必须大写（react规定）")])],-1),Dn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},'"h1"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("className"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"main"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" onClick"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"内容"'),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"||"),(0,t.Uk)(" children"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 和vue 不同react子组可以数组[children]、也可以单个单个传递"),(0,t.Uk)("\nReact"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"null"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" clild1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" clild2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" clild4"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(" \nReact"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"null"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(" \n"),(0,t.Wm)("span",{class:"token comment"},"// 第一个参数是组件"),(0,t.Uk)("\nReact"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("List"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"null"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(" \n"),(0,t.Wm)("span",{class:"token comment"},"// JSX(可以使用babel在线转换试试)"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" url "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"../a.png"'),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" list "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"3"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" imgElem "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div "),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},'"container"'),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        \t\t "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("list"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"map"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          \t\t\t"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("test"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("span"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n       \t\t\t "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(" \n        \t\t "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("img src"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("url"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n        \t    "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// "),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" url "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"../a.png"'),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" list "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" imgElem "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"/*#__PURE__*/"),(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},'"div"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"class"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"container"'),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" list"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"map"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"/*#__PURE__*/"),(0,t.Uk)("\n  React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},'"span"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"null"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"test"'),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"/*#__PURE__*/"),(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},'"img"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  src"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" url\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),In=(0,t.Wm)("h3",{id:"setstate-和-batchupdate",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#setstate-和-batchupdate","aria-hidden":"true"},"#"),(0,t.Uk)(" setState 和 batchUpdate")],-1),On=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:l,alt:"batchUpdate"})],-1),En=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"有时异步(普通使用),有时同步(setTimeout、原生DOM事件)"),(0,t.Wm)("li",null,"有时合并(对象形式),有时不合并(函数形式)"),(0,t.Wm)("li",null,"setState是否同步，看是否能命中bacthUpdate机制，判断isBatchingUpdates"),(0,t.Wm)("li",null,"bacthUpdate可命中 生命周期、React中注册的事件等React可以“管理”的入口")])],-1),An=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("  "),(0,t.Wm)("span",{class:"token function"},"componentDidMount"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 开始：处于batchUpdate"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// isBatchingUpdates = true"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// 异步"),(0,t.Uk)("\n      count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(" \n    "),(0,t.Wm)("span",{class:"token function"},"setTimeout"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n     "),(0,t.Wm)("span",{class:"token comment"},"// 在setTimeout执行时,isBatchingUpdates已经false"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token comment"},"// 同步"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        count"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("state"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("count "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 结束"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// isBatchingUpdates = false"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),Vn=(0,t.Wm)("h3",{id:"transaction-交易-事物机制",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#transaction-交易-事物机制","aria-hidden":"true"},"#"),(0,t.Uk)(" transaction(交易)事物机制")],-1),Hn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:m,alt:"transaction"}),(0,t.Wm)("img",{src:u,alt:"transaction"})],-1),Nn=(0,t.Wm)("h3",{id:"组件渲染和更新过程",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#组件渲染和更新过程","aria-hidden":"true"},"#"),(0,t.Uk)(" 组件渲染和更新过程")],-1),_n=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"渲染")]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"当页面一打开，就会调用render构建一棵DOM树"),(0,t.Wm)("li",null,"当数据发生变化（ state | props ）时，就会再渲染出一棵DOM树"),(0,t.Wm)("li",null,"此时，进行diff运算，两棵DOM树进行差异化对比，找到更新的地方进行批量改动")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"props state"),(0,t.Wm)("li",null,"render()生成vnode"),(0,t.Wm)("li",null,[(0,t.Uk)("patch(element, vnode) "),(0,t.Wm)("strong",null,"更新过程")]),(0,t.Wm)("li",null,"setState(newState) ==> dirtyComponents(可能有子组件) setState修改之后会生成dirtyComponents(可能是当前组件或者子组件)，遍历它生成newVnode"),(0,t.Wm)("li",null,"render()生成newVnode"),(0,t.Wm)("li",null,"patch(element, vnode)")])],-1),Fn=(0,t.Wm)("h3",{id:"react-fiber",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#react-fiber","aria-hidden":"true"},"#"),(0,t.Uk)(" React-fiber")],-1),Bn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"更新的分为两个阶段")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"reconciliation(协调) 阶段 - 执行diff算法，纯JS计算"),(0,t.Wm)("li",null,[(0,t.Uk)("commit阶段 - 将diff结果渲染DOM "),(0,t.Wm)("strong",null,"可能会有性能问题")]),(0,t.Wm)("li",null,"JS是单线程，且和DOM渲染共用一个线程"),(0,t.Wm)("li",null,"当组件足够复杂，组件更新时计算和渲染都压力大"),(0,t.Wm)("li",null,[(0,t.Uk)("当同是再有DOM操作需求(动画,鼠标拖拽等),将卡顿 "),(0,t.Wm)("strong",null,"解决方案 fiber")])]),(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,"将reconciliation阶段进行任务拆分(commit阶段无法拆分)"),(0,t.Wm)("li",null,"DOM需要渲染时暂停，空闲时恢复重启各个子任务的执行"),(0,t.Wm)("li",null,"window.requestIdleCallback")])],-1),Jn=(0,t.Wm)("h3",{id:"vue-和-react一些区别",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#vue-和-react一些区别","aria-hidden":"true"},"#"),(0,t.Uk)(" Vue 和 React一些区别")],-1),Ln=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"相同点")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"都支持组件化"),(0,t.Wm)("li",null,"都是数据驱动视同"),(0,t.Wm)("li",null,[(0,t.Uk)("都使用vdom操作dom "),(0,t.Wm)("strong",null,"不同点")]),(0,t.Wm)("li",null,"React 使用JSX拥抱JS, Vue使用模板拥抱html"),(0,t.Wm)("li",null,"React函数式编程,Vue声明式编程"),(0,t.Wm)("li",null,[(0,t.Uk)("React更多需要自力更生(手动挡)，Vue把想要的都给你 "),(0,t.Wm)("strong",null,"细的")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Vue"),(0,t.Uk)(" 定义了很多指令(如v-for、v-if)去实现一些展示，"),(0,t.Wm)("code",null,"React"),(0,t.Uk)(" 主要还是依赖JS方法去实现")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Vue"),(0,t.Uk)(" 绑定事件 "),(0,t.Wm)("code",null,"Event"),(0,t.Uk)(" 是原生的和DOM事件一样, 而 "),(0,t.Wm)("code",null,"React"),(0,t.Uk)(" 是封装组合之后的 "),(0,t.Wm)("code",null,"SyntheticBaseEvent"),(0,t.Uk)(" 需要访问"),(0,t.Wm)("code",null,"nativeEvent"),(0,t.Uk)(" 才能获取原生"),(0,t.Wm)("code",null,"Event"),(0,t.Uk)("。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Vue"),(0,t.Uk)(" 使用 "),(0,t.Wm)("code",null,"v-model"),(0,t.Uk)(" 语法糖实现双向数据绑定，而"),(0,t.Wm)("code",null,"React"),(0,t.Uk)("则需要自己绑定"),(0,t.Wm)("code",null,"onChange"),(0,t.Uk)(" 事件")])])],-1),Xn={render:function(n,s){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[W,r,i,U,d,h,f,g,y,w,v,x,b,R,C,S,T,P,M,j,D,I,O,E,A,V,H,N,_,F,B,J,L,X,q,z,Y,$,G,K,Q,Z,nn,sn,an,tn,on,en,cn,pn,kn,ln,mn,un,Wn,rn,Un,dn,hn,fn,gn,yn,(0,t.Wm)("p",null,[wn,(0,t.Wm)("a",vn,[xn,(0,t.Wm)(a)])]),bn,Rn,Cn,Sn,Tn,Pn,Mn,jn,Dn,In,On,En,An,Vn,Hn,Nn,_n,Fn,Bn,Jn,Ln],64)}}}}]);