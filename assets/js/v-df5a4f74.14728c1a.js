(self.webpackChunkvuepress_starter=self.webpackChunkvuepress_starter||[]).push([[4699],{367:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-df5a4f74",path:"/vueAnalysis/entry/init.html",title:"initMixin流程",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[],filePathRelative:"vueAnalysis/entry/init.md",git:{updatedTime:1626959386e3,contributors:[{name:"jun6.li",email:"jun6.li@ly.com",commits:1}]}}},7178:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var t=a(4057);const o=a.p+"assets/img/instance.15f0b71b.png",e=(0,t.Wm)("h1",{id:"initmixin流程",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#initmixin流程","aria-hidden":"true"},"#"),(0,t.Uk)(" initMixin流程")],-1),c=(0,t.Wm)("p",null,[(0,t.Uk)("在上一节我们讲到了"),(0,t.Wm)("code",null,"initGlobalAPI"),(0,t.Uk)("的整体流程，这一节，我们来介绍"),(0,t.Wm)("code",null,"initMixin"),(0,t.Uk)("的整体流程。首先，我们把目光回到"),(0,t.Wm)("code",null,"src/core/index.js"),(0,t.Uk)("文件中：")],-1),k=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" Vue "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./instance/index'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" initGlobalAPI "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./global-api/index'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"initGlobalAPI"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" Vue\n")])])],-1),p=(0,t.Wm)("p",null,[(0,t.Uk)("我们发现，它从别的模块中引入了大"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("，那么接下来我们的首要任务就是揭开"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("构造函数的神秘面纱。")],-1),l=(0,t.Wm)("p",null,[(0,t.Uk)("在看"),(0,t.Wm)("code",null,"src/core/instance/index.js"),(0,t.Uk)("代码之前，我们发现"),(0,t.Wm)("code",null,"instance"),(0,t.Uk)("目录结构如下：")],-1),m=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- instance\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- render-helpers      "),(0,t.Wm)("span",{class:"token comment"},"# render渲染相关的工具函数目录"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- events.js           "),(0,t.Wm)("span",{class:"token comment"},"# 事件处理相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- init.js             "),(0,t.Wm)("span",{class:"token comment"},"# _init等方法相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- inject.js           "),(0,t.Wm)("span",{class:"token comment"},"# inject和provide相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- lifecycle.js        "),(0,t.Wm)("span",{class:"token comment"},"# 生命周期相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- proxy.js            "),(0,t.Wm)("span",{class:"token comment"},"# 代理相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- render.js           "),(0,t.Wm)("span",{class:"token comment"},"# 渲染相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- state.js            "),(0,t.Wm)("span",{class:"token comment"},"# 数据状态相关"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("-- index.js            "),(0,t.Wm)("span",{class:"token comment"},"# 入口文件"),(0,t.Uk)("\n")])])],-1),u=(0,t.Wm)("p",null,"可以看到，目录结构文件有很多，而且包含的面也非常杂，但我们现在只需要对我们最关心的几个部分做介绍：",-1),i=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"events.js"),(0,t.Uk)("：处理事件相关，例如："),(0,t.Wm)("code",null,"$on"),(0,t.Uk)("，"),(0,t.Wm)("code",null,"$off"),(0,t.Uk)("，"),(0,t.Wm)("code",null,"$emit"),(0,t.Uk)("以及"),(0,t.Wm)("code",null,"$once"),(0,t.Uk)("等方法的实现。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"init.js"),(0,t.Uk)("：此部分代码逻辑包含了"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("从创建实例到实例挂载阶段的所有主要逻辑。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"lifecycle.js"),(0,t.Uk)("：生命周期相关，例如："),(0,t.Wm)("code",null,"$destroy"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"$activated"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"$deactivated"),(0,t.Uk)("。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"state.js"),(0,t.Uk)("：数据状态相关，例如："),(0,t.Wm)("code",null,"data"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"props"),(0,t.Uk)("以及"),(0,t.Wm)("code",null,"computed"),(0,t.Uk)("等。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"render.js"),(0,t.Uk)("：渲染相关，其中最值得关注的是"),(0,t.Wm)("code",null,"Vue.prototype._render"),(0,t.Uk)("渲染函数的定义。")])],-1),W=(0,t.Wm)("p",null,[(0,t.Uk)("在介绍了"),(0,t.Wm)("code",null,"instance"),(0,t.Uk)("目录结构的及其各自的作用以后，我们再来看入口文件，其实入口文件这里才是"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("构造函数庐山真面目：")],-1),U=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" initMixin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./init'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" stateMixin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./state'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" renderMixin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./render'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" eventsMixin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./events'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" lifecycleMixin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./lifecycle'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" warn "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'../util/index'"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"Vue"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"options"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("process"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("env"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token constant"},"NODE_ENV"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'production'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"&&"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token operator"},"!"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"instanceof"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"warn"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'Vue is a constructor and should be called with the `new` keyword'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"_init"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("options"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token function"},"initMixin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"stateMixin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"eventsMixin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"lifecycleMixin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"renderMixin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Uk)(" Vue\n")])])],-1),r=(0,t.Wm)("p",null,"代码分析：",-1),d=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("构造函数其实就是一个普通的函数，我们只能通过"),(0,t.Wm)("code",null,"new"),(0,t.Uk)("操作符进行访问，既"),(0,t.Wm)("code",null,"new Vue()"),(0,t.Uk)("的形式，"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("函数内部也使用了"),(0,t.Wm)("code",null,"instanceof"),(0,t.Uk)("操作符来判断实例的父类是否为"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("构造函数，不是的话则在开发环境下输出警告信息。")]),(0,t.Wm)("li",null,[(0,t.Uk)("除了声明"),(0,t.Wm)("code",null,"Vue"),(0,t.Uk)("构造函数，这部分的代码也调用了几种"),(0,t.Wm)("code",null,"mixin"),(0,t.Uk)("方法，其中每种"),(0,t.Wm)("code",null,"mixin"),(0,t.Uk)("方法各司其职，处理不同的内容。")])],-1),f=(0,t.Wm)("p",null,[(0,t.Uk)("从以上代码中，我们能得到"),(0,t.Wm)("code",null,"src/core/instance/index.js"),(0,t.Uk)("文件非常直观的代码逻辑流程图：")],-1),v=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:o,alt:"instance流程"})],-1),y=(0,t.Wm)("p",null,[(0,t.Uk)("接下来我们的首要任务是弄清楚"),(0,t.Wm)("code",null,"_init()"),(0,t.Uk)("函数的代码逻辑以及"),(0,t.Wm)("code",null,"initMixin"),(0,t.Uk)("的整体流程。我们从上面的代码发现，在构造函数内部会调用"),(0,t.Wm)("code",null,"this._init()"),(0,t.Uk)("方法，如下：")],-1),g=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 实例化时，会调用this._init()方法。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Vue"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  data"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    msg"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Hello, Vue.js'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])])],-1),w=(0,t.Wm)("p",null,[(0,t.Uk)("然后，我们在"),(0,t.Wm)("code",null,"init.js"),(0,t.Uk)("中来看"),(0,t.Wm)("code",null,"initMixin()"),(0,t.Uk)("方法是如何被定义的：")],-1),x=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"initMixin"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"Vue"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token class-name"},"Vue"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prototype"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function-variable function"},"_init"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"options"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 省略代码"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),j=(0,t.Wm)("p",null,[(0,t.Uk)("我们可以发现，"),(0,t.Wm)("code",null,"initMixin()"),(0,t.Uk)("方法的主要作用就是在"),(0,t.Wm)("code",null,"Vue.prototype"),(0,t.Uk)("上定义一个"),(0,t.Wm)("code",null,"_init()"),(0,t.Uk)("实例方法，接下来我们来看一下"),(0,t.Wm)("code",null,"_init()"),(0,t.Uk)("函数的具体实现逻辑：")],-1),V=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token class-name"},"Vue"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prototype"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function-variable function"},"_init"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"options"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" vm "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"// 1. 合并配置"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("options "),(0,t.Wm)("span",{class:"token operator"},"&&"),(0,t.Uk)(" options"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("_isComponent"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"initInternalComponent"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" options"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("$options "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"mergeOptions"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token function"},"resolveConstructorOptions"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("constructor"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        options "),(0,t.Wm)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        vm\n      "),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t.Wm)("span",{class:"token comment"},"// 2.render代理"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("process"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("env"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token constant"},"NODE_ENV"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"!=="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'production'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token function"},"initProxy"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("_renderProxy "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" vm\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t.Wm)("span",{class:"token comment"},"// 3.初始化生命周期、初始化事件中心、初始化inject，"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token comment"},"//   初始化state、初始化provide、调用生命周期"),(0,t.Uk)("\n    vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("_self "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" vm\n    "),(0,t.Wm)("span",{class:"token function"},"initLifecycle"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"initEvents"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"initRender"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"callHook"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'beforeCreate'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"initInjections"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"initState"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"initProvide"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"callHook"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'created'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t.Wm)("span",{class:"token comment"},"// 4.挂载"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("$options"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("el"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"$mount"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("vm"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("$options"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("el"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),h=(0,t.Wm)("p",null,[(0,t.Uk)("因为我们是要分析"),(0,t.Wm)("code",null,"initMixin"),(0,t.Uk)("整体流程，对于其中某些方法的具体实现逻辑会在后续进行详细的说明，因此我们可以从以上代码得到"),(0,t.Wm)("code",null,"initMixin"),(0,t.Uk)("的整体流程图。")],-1),M=(0,t.Wm)("div",{style:{"text-align":"center"}},[(0,t.Wm)("img",{src:"assets/images/vueAnalysis/initMixin.png"})],-1),_={render:function(n,s){return(0,t.wg)(),(0,t.j4)(t.HY,null,[e,c,k,p,l,m,u,i,W,U,r,d,f,v,y,g,w,x,j,V,h,M],64)}}}}]);