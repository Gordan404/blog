(self.webpackChunkvuepress_starter=self.webpackChunkvuepress_starter||[]).push([[4703],{6832:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-1950354c",path:"/webpack/webpack/advanced.html",title:"Webpack进阶",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"Tree Shaking",slug:"tree-shaking",children:[]},{level:2,title:"区分开发模式和生产模式",slug:"区分开发模式和生产模式",children:[]},{level:2,title:"代码分离(CodeSplitting)",slug:"代码分离-codesplitting",children:[]},{level:2,title:"SplitChunksPlugin配置参数详解",slug:"splitchunksplugin配置参数详解",children:[]},{level:2,title:"Lazy Loading懒加载",slug:"lazy-loading懒加载",children:[]},{level:2,title:"PreLoading 和Prefetching",slug:"preloading-和prefetching",children:[]},{level:2,title:"CSS代码分割",slug:"css代码分割",children:[]},{level:2,title:"Webpack和浏览器缓存(Caching)",slug:"webpack和浏览器缓存-caching",children:[]},{level:2,title:"Shimming",slug:"shimming",children:[]},{level:2,title:"处理全局this指向问题",slug:"处理全局this指向问题",children:[]}],filePathRelative:"webpack/webpack/advanced.md",git:{updatedTime:1626959386e3,contributors:[{name:"jun6.li",email:"jun6.li@ly.com",commits:1}]}}},6514:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>st});var t=a(4057);const o=a.p+"assets/img/32.112a7e02.png",e=a.p+"assets/img/33.74f25711.png",c=a.p+"assets/img/19.7582c0f1.png",p=a.p+"assets/img/20.6954ab6b.png",l=a.p+"assets/img/21.276b78c2.png",k=a.p+"assets/img/22.e27859c9.png",m=(0,t.Wm)("h1",{id:"webpack进阶",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#webpack进阶","aria-hidden":"true"},"#"),(0,t.Uk)(" Webpack进阶")],-1),u=(0,t.Wm)("h2",{id:"tree-shaking",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#tree-shaking","aria-hidden":"true"},"#"),(0,t.Uk)(" Tree Shaking")],-1),W=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("是一个术语，通常用于描述移除"),(0,t.Wm)("code",null,"js"),(0,t.Uk)("中未使用的代码。")])],-1),i=(0,t.Wm)("div",{class:"custom-container warning"},[(0,t.Wm)("p",{class:"custom-container-title"},"注意"),(0,t.Wm)("p",null,[(0,t.Uk)("Tree Shaking 只适用于"),(0,t.Wm)("code",null,"ES Module"),(0,t.Uk)("语法(既通过"),(0,t.Wm)("code",null,"export"),(0,t.Uk)("导出，"),(0,t.Wm)("code",null,"import"),(0,t.Uk)("引入)，因为它依赖于"),(0,t.Wm)("code",null,"ES Module"),(0,t.Uk)("的静态结构特性。")])],-1),r=(0,t.Wm)("p",null,[(0,t.Uk)("在正式介绍"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("之前，我们需要现在"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("目录下新建一个"),(0,t.Wm)("code",null,"math.js"),(0,t.Uk)("文件，它的代码如下：")],-1),U=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"add"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("a "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"minus"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("a "),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),d=(0,t.Wm)("p",null,[(0,t.Uk)("接下来我们对"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("做一下处理，它的代码像下面这样，从"),(0,t.Wm)("code",null,"math.js"),(0,t.Uk)("中引用"),(0,t.Wm)("code",null,"add"),(0,t.Uk)("方法并调用：")],-1),g=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" add "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./math'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"add"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),h=(0,t.Wm)("p",null,[(0,t.Uk)("在上面的"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("改动完毕后，我们最后需要对"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("做一下配置，让它支持"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("，它的改动如下：")],-1),b=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" path "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'path'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'development'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  entry"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    main"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./src/index.js'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    usedExports"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  output"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'main.js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    path"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" path"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"resolve"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("__dirname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'dist'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),j=(0,t.Wm)("p",null,[(0,t.Uk)("在以上"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("配置完毕后，我们需要使用"),(0,t.Wm)("code",null,"npx webpack"),(0,t.Uk)("进行打包，它的打包结果如下：")],-1),v=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// dist/main.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token string"},'"use strict"'),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"/* harmony export (binding) */"),(0,t.Uk)(" \n__webpack_require__"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"d"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("__webpack_exports__"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"a"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" add"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"/* unused harmony export minus */"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"add"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("a "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"minus"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("a "),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),x=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"打包结果分析"),(0,t.Uk)("：虽然我们配置了 "),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("，但在开发环境下，我们依然能够看到未使用过的"),(0,t.Wm)("code",null,"minus"),(0,t.Uk)("方法，以上注释也清晰了说明了这一点，这个时候你可能会问：为什么我们配置了"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("，"),(0,t.Wm)("code",null,"minus"),(0,t.Uk)("方法也没有被使用，但依然还是被打包进了"),(0,t.Wm)("code",null,"main.js"),(0,t.Uk)("中？"),(0,t.Wm)("br")],-1),f=(0,t.Wm)("p",null,[(0,t.Uk)("其实这个原因很简单，这是因为我们处于开发环境下打包，当我们处于开发环境下时，由于"),(0,t.Wm)("code",null,"source-map"),(0,t.Uk)("等相关因素的影响，如果我们不把没有使用的代码一起打包进来的话，"),(0,t.Wm)("code",null,"source-map"),(0,t.Uk)("就不是很准确，这会影响我们本地开发的效率。"),(0,t.Wm)("br")],-1),w=(0,t.Wm)("p",null,[(0,t.Uk)("看完以上本地开发"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("的结果，我们也知道了本地开发"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("相对来说是不起作用的，那么在生产环境下打包时，"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("的表现又如何呢？"),(0,t.Wm)("br")],-1),y=(0,t.Wm)("p",null,[(0,t.Uk)("在生产环境下打包，需要我们对"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("中的"),(0,t.Wm)("code",null,"mode"),(0,t.Uk)("属性，需要由"),(0,t.Wm)("code",null,"development"),(0,t.Uk)("改为"),(0,t.Wm)("code",null,"production"),(0,t.Uk)("，它的改动如下：")],-1),C=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" path "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'path'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'production'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  entry"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    main"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./src/index.js'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    usedExports"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  output"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'main.js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    path"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" path"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"resolve"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("__dirname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'dist'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),S=(0,t.Wm)("p",null,[(0,t.Uk)("配置完毕后，我们依然使用"),(0,t.Wm)("code",null,"npx webpack"),(0,t.Uk)("进行打包，可以看到，它的打包结果如下所示：")],-1),_=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// dist/main.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("e"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("n"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("r")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token string"},'"use strict"'),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" t"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("o"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  r"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"r"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("n"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  t"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  o"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("t"),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)("o"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),z=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"打包代码分析"),(0,t.Uk)("：以上代码是一段被压缩过后的代码，我们可以看到，上面只有"),(0,t.Wm)("code",null,"add"),(0,t.Uk)("方法，未使用的"),(0,t.Wm)("code",null,"minus"),(0,t.Uk)("方法并没有被打包进来，这说明在生产环境下我们的"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("才能真正起作用。")],-1),P=(0,t.Wm)("h4",{id:"sideeffects",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#sideeffects","aria-hidden":"true"},"#"),(0,t.Uk)(" SideEffects")],-1),q=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,[(0,t.Uk)("由于"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("作用于所有通过"),(0,t.Wm)("code",null,"import"),(0,t.Uk)("引入的文件，如果我们引入第三方库，例如："),(0,t.Wm)("code",null,"import _ from 'lodash'"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,".css"),(0,t.Uk)("文件，例如"),(0,t.Wm)("code",null,"import './style.css'"),(0,t.Uk)(" 时，如果我们不 做限制的话，Tree Shaking将起副作用，"),(0,t.Wm)("code",null,"SideEffects"),(0,t.Uk)("属性能帮我们解决这个问题：它告诉"),(0,t.Wm)("code",null,"webpack"),(0,t.Uk)("，我们可以对哪些文件不做 "),(0,t.Wm)("code",null,"Tree Shaking")])],-1),L=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 修改package.json"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 如果不希望对任何文件进行此配置，可以设置sideEffects属性值为false"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// *.css 表示 对所有css文件不做 Tree Shaking"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// @babael/polyfill 表示 对@babel/polyfill不做 Tree Shaking"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token string"},'"sideEffects"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token string"},'"*.css"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token string"},'"@babel/polyfill"'),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n")])])],-1),T=(0,t.Wm)("strong",null,"小结",-1),E=(0,t.Uk)("：对于"),$=(0,t.Wm)("code",null,"Tree Shaking",-1),H=(0,t.Uk)("的争议比较多，推荐看👉"),M={href:"https://zhuanlan.zhihu.com/p/32831172",target:"_blank",rel:"noopener noreferrer"},R=(0,t.Uk)("你的Tree Shaking并没有什么卵用"),D=(0,t.Uk)("，看完你会发现我们对"),I=(0,t.Wm)("code",null,"Tree Shaking",-1),B=(0,t.Uk)("的了解还需要进一步加深。"),A=(0,t.Wm)("h2",{id:"区分开发模式和生产模式",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#区分开发模式和生产模式","aria-hidden":"true"},"#"),(0,t.Uk)(" 区分开发模式和生产模式")],-1),N=(0,t.Wm)("p",null,[(0,t.Uk)("像上一节那样，如果我们要区分"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("的开发环境和生产环境，那么我们每次打包的都要去更改"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("文件，有没有什么办法能让我们少改一点代码呢？ 答案是有的！")],-1),K=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,[(0,t.Uk)("区分开发环境和生产环境，最好的办法是把公用配置提取到一个配置文件，生产环境和开发环境只写自己需要的配置，在打包的时候再进行合并即可，"),(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"webpack-merge")]),(0,t.Uk)(" 可以帮我们做到这个事情。")])],-1),G=(0,t.Wm)("p",null,[(0,t.Uk)("首先，我们效仿各大框架的脚手架的形式，把 Webpack 相关的配置都放在根目录下的"),(0,t.Wm)("code",null,"build"),(0,t.Uk)("文件夹下，所以我们需要新建一个"),(0,t.Wm)("code",null,"build"),(0,t.Uk)("文件夹，随后我们要在此文件夹下新建三个"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件和删除"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("，它们分别是：")],-1),O=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("：Webpack 公用配置文件")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"webpack.dev.js"),(0,t.Uk)("：开发环境下的 Webpack 配置文件")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"webpack.prod.js"),(0,t.Uk)("：生产环境下的 Webpack 配置文件")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("："),(0,t.Wm)("strong",null,"删除"),(0,t.Uk)("根目录下的此文件")])],-1),Q=(0,t.Wm)("p",null,[(0,t.Uk)("新建完"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("文件后，我们需要把公用配置提取出来，它的代码看起来应该是下面这样子的：")],-1),F=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" path "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'path'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" HtmlWebpackPlugin "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'html-webpack-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" CleanWebpackPlugin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'clean-webpack-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  entry"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    main"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./src/index.js'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  module"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    rules"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"\\.css$"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        use"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'style-loader'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'css-loader'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" \n        test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"\\.js$"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        exclude"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"node_modules"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        loader"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"babel-loader"'),(0,t.Uk)(" \n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  plugins"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"HtmlWebpackPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      template"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'src/index.html'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"CleanWebpackPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  output"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'[name].js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    path"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" path"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"resolve"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("__dirname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'dist'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),J=(0,t.Wm)("p",null,[(0,t.Uk)("提取完 Webpack 公用配置文件后，我们开发环境下的配置，也就是"),(0,t.Wm)("code",null,"webpack.dev.js"),(0,t.Uk)("中的代码，将剩下下面这些：")],-1),Y=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" webpack "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'webpack'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'development'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'cheap-module-eval-source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devServer"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    contentBase"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'dist'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    open"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    port"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3000"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    hot"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    hotOnly"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  plugins"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("HotModuleReplacementPlugin")]),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),V=(0,t.Wm)("p",null,[(0,t.Uk)("而生产环境下的配置，也就是"),(0,t.Wm)("code",null,"webpack.prod.js"),(0,t.Uk)("中的代码，可能是下面这样子的：")],-1),X=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'production'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'cheap-module-source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    usedExports"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),Z=(0,t.Wm)("p",null,[(0,t.Uk)("在处理完以上三个"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件后，我们需要做一件事情：")],-1),nn=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Uk)("当处于开发环境下时，把"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("中的配置和"),(0,t.Wm)("code",null,"webpack.dev.js"),(0,t.Uk)("中的配置合并在一起")]),(0,t.Wm)("li",null,[(0,t.Uk)("当处于开发环境下时，把"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("中的配置和"),(0,t.Wm)("code",null,"webpack.prod.js"),(0,t.Uk)("中的配置合并在一起")])],-1),sn=(0,t.Wm)("p",null,[(0,t.Uk)("针对以上问题，我们可以使用"),(0,t.Wm)("code",null,"webpack-merge"),(0,t.Uk)("进行合并，在使用之前，我们需要使用如下命令进行安装：")],-1),an=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Uk)("$ "),(0,t.Wm)("span",{class:"token function"},"npm"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"install"),(0,t.Uk)(" webpack-merge -D\n")])])],-1),tn=(0,t.Wm)("p",null,[(0,t.Uk)("安装完毕后，我们需要对"),(0,t.Wm)("code",null,"webpack.dev.js"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"webpack.prod.js"),(0,t.Uk)("做一下手脚，其中"),(0,t.Wm)("code",null,"webpack.dev.js"),(0,t.Uk)("中的改动如下(代码高亮部分)：")],-1),on=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" webpack "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'webpack'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" merge "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'webpack-merge'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" commonConfig "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'./webpack.common'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" devConfig "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'development'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'cheap-module-eval-source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devServer"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    contentBase"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'dist'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    open"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    port"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3000"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    hot"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    hotOnly"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  plugins"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("HotModuleReplacementPlugin")]),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"merge"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("commonConfig"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" devConfig"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," ")])],-1),en=(0,t.Wm)("p",null,[(0,t.Uk)("相同的代码，"),(0,t.Wm)("code",null,"webpack.prod.js"),(0,t.Uk)("中的改动部分如下(代码高亮)：")],-1),cn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" merge "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'webpack-merge'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" commonConfig "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'./webpack.common'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" prodConfig "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  mode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'production'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  devtool"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'cheap-module-source-map'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    usedExports"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"merge"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("commonConfig"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" prodConfig"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," ")])],-1),pn=(0,t.Wm)("p",null,[(0,t.Uk)("聪明的你一定想到了，因为上面我们已经删除了"),(0,t.Wm)("code",null,"webpack.config.js"),(0,t.Uk)("文件，所以我们需要重新在"),(0,t.Wm)("code",null,"package.json"),(0,t.Uk)("中配置一下我们的打包命令，它们是这样子写的：")],-1),ln=(0,t.Wm)("div",{class:"language-json ext-json"},[(0,t.Wm)("pre",{class:"language-json"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token property"},'"scripts"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},'"dev"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"webpack-dev-server --config ./build/webpack.dev.js"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},'"build"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"webpack --config ./build/webpack.prod.js"'),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n")])])],-1),kn=(0,t.Wm)("p",null,"配置完打包命令，心急的你可能会马上开始尝试进行打包，你的打包目录可能长成下面这个样子：",-1),mn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" build\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("common"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("dev"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prod"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" src\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" math"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("babelrc\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" postcss"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("config"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"package"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("json\n")])])],-1),un=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"问题分析"),(0,t.Uk)("：当我们运行"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("时，"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("目录打包到了"),(0,t.Wm)("code",null,"build"),(0,t.Uk)("文件夹下了，这是因为我们把Webpack 相关的配置放到了"),(0,t.Wm)("code",null,"build"),(0,t.Uk)("文件夹下后，并没有做其他配置，Webpack 会认为"),(0,t.Wm)("code",null,"build"),(0,t.Uk)("文件夹会是根目录，要解决这个问题，需要我们在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("中修改"),(0,t.Wm)("code",null,"output"),(0,t.Uk)("属性，具体改动的部分如下所示：")],-1),Wn=(0,t.Wm)("div",{class:"language-json ext-json"},[(0,t.Wm)("pre",{class:"language-json"},[(0,t.Wm)("code",null,[(0,t.Uk)("output"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" '"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("name"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)(".js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  path"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" path.resolve(__dirname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("'../dist')\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br")])],-1),rn=(0,t.Wm)("p",null,"那么解决完上面这个问题，赶紧使用你的打包命令测试一下吧，我的打包目录是下面这样子，如果你按上面的配置后，你的应该跟此目录类似",-1),Un=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" build\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("common"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("dev"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prod"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" src\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" math"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("babelrc\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" postcss"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("config"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"package"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("json\n")])])],-1),dn=(0,t.Wm)("h2",{id:"代码分离-codesplitting",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#代码分离-codesplitting","aria-hidden":"true"},"#"),(0,t.Uk)(" 代码分离(CodeSplitting)")],-1),gn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"Code Splitting"),(0,t.Uk)(" 的核心是把很大的文件，分离成更小的块，让浏览器进行并行加载。")])],-1),hn=(0,t.Wm)("p",null,"常见的代码分割有三种形式：",-1),bn=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Uk)("手动进行分割：例如项目如果用到"),(0,t.Wm)("code",null,"lodash"),(0,t.Uk)("，则把"),(0,t.Wm)("code",null,"lodash"),(0,t.Uk)("单独打包成一个文件。")]),(0,t.Wm)("li",null,"同步导入的代码：使用 Webpack 配置进行代码分割。"),(0,t.Wm)("li",null,"异步导入的代码：通过模块中的内联函数调用来分割代码。")],-1),jn=(0,t.Wm)("h4",{id:"手动进行分割",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#手动进行分割","aria-hidden":"true"},"#"),(0,t.Uk)(" 手动进行分割")],-1),vn=(0,t.Wm)("p",null,[(0,t.Uk)("手动进行分割的意思是在"),(0,t.Wm)("code",null,"entry"),(0,t.Uk)("上配置多个入口，例如像下面这样：")],-1),xn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  entry"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    main"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./src/index.js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    lodash"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),fn=(0,t.Wm)("p",null,[(0,t.Uk)("这样配置后，我们使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("打包命令，它的打包输出结果为：")],-1),wn=(0,t.Wm)("div",{class:"language-text ext-text"},[(0,t.Wm)("pre",{class:"language-text"},[(0,t.Wm)("code",null,"        Asset       Size  Chunks             Chunk Names\n  index.html  462 bytes          [emitted]\n    lodash.js   1.46 KiB       1  [emitted]  lodash\nlodash.js.map   5.31 KiB       1  [emitted]  lodash\n      main.js   1.56 KiB       2  [emitted]  main\n  main.js.map   5.31 KiB       2  [emitted]  main\n")])],-1),yn=(0,t.Wm)("p",null,[(0,t.Uk)("它输出了两个模块，也能在一定程度上进行代码分割，不过这种分割是十分脆弱的，如果两个模块共同引用了第三个模块，那么第三个模块会被同时打包进这两个入口文件中，而不是分离出来。"),(0,t.Wm)("br"),(0,t.Wm)("br")],-1),Cn=(0,t.Wm)("p",null,[(0,t.Uk)("所以我们常见的做法是关心最后两种代码分割方法，无论是同步代码还是异步代码，都需要在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("中配置"),(0,t.Wm)("code",null,"splitChunks"),(0,t.Uk)("属性，像下面这样子：")],-1),Sn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置"),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'all'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),_n=(0,t.Wm)("p",null,[(0,t.Uk)("你可能已经看到了其中有一个"),(0,t.Wm)("code",null,"chunks"),(0,t.Uk)("属性，它告诉 Webpack 应该对哪些模式进行打包，它的参数有三种：")],-1),zn=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"async"),(0,t.Uk)("：此值为默认值，只有异步导入的代码才会进行代码分割。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"initial"),(0,t.Uk)("：与"),(0,t.Wm)("code",null,"async"),(0,t.Uk)("相对，只有同步引入的代码才会进行代码分割。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"all"),(0,t.Uk)("：表示无论是同步代码还是异步代码都会进行代码分割。")])],-1),Pn=(0,t.Wm)("h4",{id:"同步代码分割",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#同步代码分割","aria-hidden":"true"},"#"),(0,t.Uk)(" 同步代码分割")],-1),qn=(0,t.Wm)("p",null,[(0,t.Uk)("在完成上面的配置后，让我们来安装一个相对大一点的包，例如："),(0,t.Wm)("code",null,"lodash"),(0,t.Uk)("，然后对"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("中的代码做一些手脚，像下面这样：")],-1),Ln=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("_"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'Dell'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'Lee'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"' '"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Tn=(0,t.Wm)("p",null,[(0,t.Uk)("就像上面提到的那样，同步代码分割，我们只需要在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("配置"),(0,t.Wm)("code",null,"chunks"),(0,t.Uk)("属性值为"),(0,t.Wm)("code",null,"initial"),(0,t.Uk)("即可：")],-1),En=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置"),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'initial'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),$n=(0,t.Wm)("p",null,[(0,t.Uk)("在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("配置完毕后，我们使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("来进行打包， 你的打包"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("目录看起来应该像下面这样子：")],-1),Hn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n")])])],-1),Mn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"打包分析"),(0,t.Uk)("："),(0,t.Wm)("code",null,"main.js"),(0,t.Uk)("使我们的业务代码，"),(0,t.Wm)("code",null,"vendors~main.js"),(0,t.Uk)("是第三方模块的代码，在此案例中也就是"),(0,t.Wm)("code",null,"_lodash"),(0,t.Uk)("中的代码。")],-1),Rn=(0,t.Wm)("h4",{id:"异步代码分割",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#异步代码分割","aria-hidden":"true"},"#"),(0,t.Uk)(" 异步代码分割")],-1),Dn=(0,t.Wm)("p",null,[(0,t.Uk)("由于"),(0,t.Wm)("code",null,"chunks"),(0,t.Uk)("属性的默认值为"),(0,t.Wm)("code",null,"async"),(0,t.Uk)("，如果我们只需要针对异步代码进行代码分割的话，我们只需要进行异步导入，Webpack会自动帮我们进行代码分割，异步代码分割它的配置如下：")],-1),In=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置"),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'async'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),Bn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"注意"),(0,t.Uk)("：由于异步导入语法目前并没有得到全面支持，需要通过 npm 安装 "),(0,t.Wm)("code",null,"@babel/plugin-syntax-dynamic-import"),(0,t.Uk)(" 插件来进行转译")],-1),An=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Uk)("$ "),(0,t.Wm)("span",{class:"token function"},"npm"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"install"),(0,t.Uk)(" @babel/plugin-syntax-dynamic-import -D\n")])])],-1),Nn=(0,t.Wm)("p",null,[(0,t.Uk)("安装完毕后，我们需要在根目录下的"),(0,t.Wm)("code",null,".babelrc"),(0,t.Uk)("文件做一下改动，像下面这样子：")],-1),Kn=(0,t.Wm)("div",{class:"language-json ext-json"},[(0,t.Wm)("pre",{class:"language-json"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},'"presets"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},'"@babel/preset-env"'),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token property"},'"corejs"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token property"},'"useBuiltIns"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"usage"'),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},'"plugins"'),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},'"@babel/plugin-syntax-dynamic-import"'),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br")])],-1),Gn=(0,t.Wm)("p",null,[(0,t.Uk)("配置完毕后，我们需要对"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("做一下代码改动，让它使用异步导入代码块:")],-1),On=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 点击页面，异步导入lodash模块"),(0,t.Uk)("\ndocument"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"getComponent"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"then"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"element"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getElementById"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'root'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"appendChild"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("element"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"getComponent"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token comment"},"/* webpackChunkName: 'lodash' */"),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"then"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token punctuation"},"}")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" element "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    element"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" _"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'Dell'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lee'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"' '"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" element"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),Qn=(0,t.Wm)("p",null,[(0,t.Uk)("写好以上代码后，我们同样使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("进行打包，"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("打包目录的输出结果如下：")],-1),Fn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n")])])],-1),Jn=(0,t.Wm)("p",null,[(0,t.Uk)("我们在浏览器中运行"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("目录下的"),(0,t.Wm)("code",null,"index.html"),(0,t.Uk)("，切换到"),(0,t.Wm)("code",null,"network"),(0,t.Uk)("面板时，我们可以发现只加载了"),(0,t.Wm)("code",null,"main.js"),(0,t.Uk)("，如下图：")],-1),Yn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:o,alt:"异步导入的结果"}),(0,t.Wm)("br"),(0,t.Wm)("br")],-1),Vn=(0,t.Wm)("p",null,[(0,t.Uk)("当我们点击页面时，才 "),(0,t.Wm)("strong",null,"真正开始加载"),(0,t.Uk)(" 第三方模块，如下图("),(0,t.Wm)("code",null,"1.js"),(0,t.Uk)(")：")],-1),Xn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:e,alt:"异步导入的结果"})],-1),Zn=(0,t.Wm)("h2",{id:"splitchunksplugin配置参数详解",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#splitchunksplugin配置参数详解","aria-hidden":"true"},"#"),(0,t.Uk)(" SplitChunksPlugin配置参数详解")],-1),ns=(0,t.Wm)("p",null,[(0,t.Uk)("在上一节中，我们配置了"),(0,t.Wm)("code",null,"splitChunks"),(0,t.Uk)("属性，它能让我们进行代码分割，其实这是因为 Webpack 底层使用了 "),(0,t.Wm)("strong",null,[(0,t.Wm)("code",null,"splitChunksPlugin")]),(0,t.Uk)(" 插件。这个插件有很多可以配置的属性，它也有一些默认的配置参数，它的默认配置参数如下所示，我们将在下面为一些常用的配置项做一些说明。")],-1),ss=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置项"),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'async'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      minSize"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"30000"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      maxSize"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      minChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      maxAsyncRequests"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"5"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      maxInitialRequests"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"3"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      automaticNameDelimiter"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'~'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      cacheGroups"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        vendors"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n          minChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"20"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          reuseExistingChunk"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),as=(0,t.Wm)("h4",{id:"chunks参数",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#chunks参数","aria-hidden":"true"},"#"),(0,t.Uk)(" chunks参数")],-1),ts=(0,t.Wm)("p",null,[(0,t.Uk)("此参数的含义在上一节中已详细说明，同时也配置了相应的案例，就"),(0,t.Wm)("strong",null,"不再次累述"),(0,t.Uk)("。")],-1),os=(0,t.Wm)("h4",{id:"minsize-和-maxsize",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#minsize-和-maxsize","aria-hidden":"true"},"#"),(0,t.Uk)(" minSize 和 maxSize")],-1),es=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"minSize"),(0,t.Uk)("默认值是30000，也就是30kb，当代码超过30kb时，才开始进行代码分割，小于30kb的则不会进行代码分割；与"),(0,t.Wm)("code",null,"minSize"),(0,t.Uk)("相对的，"),(0,t.Wm)("code",null,"maxSize"),(0,t.Uk)("默认值为0，为0表示不限制打包后文件的大小，一般这个属性不推荐设置，一定要设置的话，它的意思是：打包后的文件最大不能超过设定的值，超过的话就会进行代码分割。")])],-1),cs=(0,t.Wm)("p",null,[(0,t.Uk)("为了测试以上两个属性，我们来写一个小小的例子，在"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("目录下新建一个"),(0,t.Wm)("code",null,"math.js"),(0,t.Uk)("文件，它的代码如下：")],-1),ps=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"add"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("a"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" b")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" a "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" b"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),ls=(0,t.Wm)("p",null,[(0,t.Uk)("新建完毕后，在"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("中引入"),(0,t.Wm)("code",null,"math.js"),(0,t.Uk)(":")],-1),ks=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" add "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./math.js'"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token function"},"add"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),ms=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"打包分析"),(0,t.Uk)("：因为我们写的"),(0,t.Wm)("code",null,"math.js"),(0,t.Uk)("文件的大小非常小，如果应用默认值，它是不会进行代码分割的，如果你要进一步测试"),(0,t.Wm)("code",null,"minSize"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"maxSize"),(0,t.Uk)("，请自行修改后打包测试。")],-1),us=(0,t.Wm)("h4",{id:"minchunks",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#minchunks","aria-hidden":"true"},"#"),(0,t.Uk)(" minChunks")],-1),Ws=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,"默认值为1，表示某个模块复用的次数大于或等于一次，就进行代码分割。")],-1),is=(0,t.Wm)("p",null,[(0,t.Uk)("如果将其设置大于1，例如："),(0,t.Wm)("code",null,"minChunks:2"),(0,t.Uk)("，在不考虑其他模块的情况下，以下代码不会进行代码分割：")],-1),rs=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 配置了minChunks: 2，以下lodash不会进行代码分割，因为只使用了一次 "),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("_"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'Dell'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Lee'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'-'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Us=(0,t.Wm)("h4",{id:"maxasyncrequests-和-maxinitialrequests",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#maxasyncrequests-和-maxinitialrequests","aria-hidden":"true"},"#"),(0,t.Uk)(" maxAsyncRequests 和 maxInitialRequests")],-1),ds=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"maxAsyncRequests"),(0,t.Uk)("：它的默认值是5，代表在进行异步代码分割时，前五个会进行代码分割，超过五个的不再进行代码分割。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"maxInitialRequests"),(0,t.Uk)("：它的默认值是3，代表在进行同步代码分割时，前三个会进行代码分割，超过三个的不再进行代码分割。")])],-1),gs=(0,t.Wm)("h4",{id:"automaticnamedelimiter",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#automaticnamedelimiter","aria-hidden":"true"},"#"),(0,t.Uk)(" automaticNameDelimiter")],-1),hs=(0,t.Wm)("p",null,[(0,t.Uk)("这是一个连接符，左边是代码分割的缓存组，右边是打包的入口文件的项，例如"),(0,t.Wm)("code",null,"vendors~main.js")],-1),bs=(0,t.Wm)("h4",{id:"cachegroups",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#cachegroups","aria-hidden":"true"},"#"),(0,t.Uk)(" cacheGroups")],-1),js=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,[(0,t.Uk)("在进行代码分割时，会把符合条件的放在一组，然后把一组中的所有文件打包在一起，默认配置项中有两个分组，一个是"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"default")])],-1),vs=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"vendors组："),(0,t.Uk)(" 以下代码的含义是，将所有通过引用"),(0,t.Wm)("code",null,"node_modules"),(0,t.Uk)("文件夹下的都放在"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("组中")],-1),xs=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("vendors"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),fs=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"default组："),(0,t.Uk)(" 默认组，意思是，不符合"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("的分组都将分配在"),(0,t.Wm)("code",null,"default"),(0,t.Uk)("组中，如果一个文件即满足"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("分组，又满足"),(0,t.Wm)("code",null,"default"),(0,t.Uk)("分组，那么通过"),(0,t.Wm)("code",null,"priority"),(0,t.Uk)("的值进行取舍，值最大"),(0,t.Wm)("strong",null,"优先级"),(0,t.Uk)("越高。")],-1),ws=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  minChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"20"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  reuseExistingChunk"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),ys=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"reuseExistingChunk："),(0,t.Uk)(" 中文解释是复用已存在的文件。意思是，如果有一个"),(0,t.Wm)("code",null,"a.js"),(0,t.Uk)("文件，它里面引用了"),(0,t.Wm)("code",null,"b.js"),(0,t.Uk)("，但我们其他模块又有引用"),(0,t.Wm)("code",null,"b.js"),(0,t.Uk)("的地方。开启这个配置项后，在打包时会分析"),(0,t.Wm)("code",null,"b.js"),(0,t.Uk)("已经打包过了，直接可以复用不用再次打包。")],-1),Cs=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// a.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" b "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'b.js'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'a.js'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// c.js"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" b "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'b.js'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'c.js'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Ss=(0,t.Wm)("h4",{id:"自定义文件名",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#自定义文件名","aria-hidden":"true"},"#"),(0,t.Uk)(" 自定义文件名")],-1),_s=(0,t.Wm)("p",null,[(0,t.Uk)("我们如果不对代码分隔后的文件进行配置的话，那么在"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("组里面的文件名，默认会按"),(0,t.Wm)("code",null,"vendors"),(0,t.Uk)("+"),(0,t.Wm)("code",null,"main"),(0,t.Uk)("(入口)的形式命名，例如："),(0,t.Wm)("code",null,"vendors~main.js"),(0,t.Uk)("，如果我们想要自定义配置文件名的话，则需要分情况：")],-1),zs=(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Uk)("同步代码分隔：使用"),(0,t.Wm)("code",null,"filename"),(0,t.Uk)("命名。")]),(0,t.Wm)("li",null,[(0,t.Uk)("非同步代码分隔：使用"),(0,t.Wm)("code",null,"name"),(0,t.Uk)("来命令。")])],-1),Ps=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 同步代码分隔"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置略"),(0,t.Uk)("\n  splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'initial'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    vendors"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'vendors.js'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// 非同步代码分隔"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置略"),(0,t.Uk)("\n  splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'async'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    vendors"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      priority"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"10"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      name"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'vendors'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),qs=(0,t.Wm)("h2",{id:"lazy-loading懒加载",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#lazy-loading懒加载","aria-hidden":"true"},"#"),(0,t.Uk)(" Lazy Loading懒加载")],-1),Ls=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"Lazy Loading"),(0,t.Uk)("懒加载的理解是：通过异步引入代码，这里说的异步，并不是在页面一开始就加载，而是在合适的时机进行加载。")])],-1),Ts=(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"Lazy Loading"),(0,t.Uk)("懒加载的实际案例我们已经在上一小节书写了一个例子，不过我们依然可以做一下小小的改动，让它使用"),(0,t.Wm)("code",null,"async/await"),(0,t.Uk)("进行异步加载，它的代码如下：")],-1),Es=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 页面点击的时候才加载lodash模块"),(0,t.Uk)("\ndocument"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"getComponet"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"then"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"element"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"appendChild"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("element"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"async"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"getComponet"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("  "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"await"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token comment"},"/* webpackChunkName: 'lodash' */"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" element "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  element"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" _"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'1'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'2'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'3'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'**'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" element"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),$s=(0,t.Wm)("p",null,"以上懒加载的结果与上一小节的结果类似，就不在此展示，你可以在你本地的项目中打包后自行测试和查看。",-1),Hs=(0,t.Wm)("h2",{id:"preloading-和prefetching",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#preloading-和prefetching","aria-hidden":"true"},"#"),(0,t.Uk)(" PreLoading 和Prefetching")],-1),Ms=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Uk)("在以上"),(0,t.Wm)("code",null,"Lazy Loading"),(0,t.Uk)("的例子中，只有当我们在页面点击时才会加载"),(0,t.Wm)("code",null,"lodash"),(0,t.Uk)("，也有一些模块虽然是异步导入的，但我们希望能提前进行加载，"),(0,t.Wm)("code",null,"PreLoading"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"Prefetching"),(0,t.Uk)("可以帮助我们实现这一点，它们的用法类似，但它们还是有区别的："),(0,t.Wm)("code",null,"Prefetching"),(0,t.Uk)("不会跟随主进程一起下载，而是等到主进程加载完毕，带宽释放后才进行加载，"),(0,t.Wm)("code",null,"PreLoading"),(0,t.Uk)("会随主进程一起加载。")])],-1),Rs=(0,t.Wm)("p",null,[(0,t.Uk)("实现"),(0,t.Wm)("code",null,"PreLoading"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,"Prefetching"),(0,t.Uk)("非常简单，我们只需要在上一节的例子中加一点点代码即可(参考高亮部分)：")],-1),Ds=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 页面点击的时候才加载lodash模块"),(0,t.Uk)("\ndocument"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"getComponet"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"then"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"element"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"appendChild"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("element"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"async"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"getComponet"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("  "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"await"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token comment"},"/* webpackPrefetch: true */"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" element "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  element"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" _"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'1'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'2'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'3'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'**'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(" element"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),Is=(0,t.Wm)("p",null,[(0,t.Uk)("改写完毕后，我们使用"),(0,t.Wm)("code",null,"npm run dev"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("进行打包，在浏览器中点击页面，我们将在"),(0,t.Wm)("code",null,"network"),(0,t.Uk)("面板看到如下图所示：")],-1),Bs=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:c,alt:"Prefetch结果"})],-1),As=(0,t.Wm)("p",null,[(0,t.Uk)("相信聪明的你一定看到了"),(0,t.Wm)("code",null,"0.js"),(0,t.Uk)("，它是"),(0,t.Wm)("code",null,"from disk cache"),(0,t.Uk)("，那为什么？原因在于，"),(0,t.Wm)("code",null,"Prefetching"),(0,t.Uk)("的代码它会在"),(0,t.Wm)("code",null,"head"),(0,t.Uk)("头部，添加像这样的一段内容：")],-1),Ns=(0,t.Wm)("div",{class:"language-css ext-css"},[(0,t.Wm)("pre",{class:"language-css"},[(0,t.Wm)("code",null,[(0,t.Uk)("<link rel="),(0,t.Wm)("span",{class:"token string"},'"prefetch"'),(0,t.Uk)(" as="),(0,t.Wm)("span",{class:"token string"},'"script"'),(0,t.Uk)(" href="),(0,t.Wm)("span",{class:"token string"},'"0.js"'),(0,t.Uk)(">\n")])])],-1),Ks=(0,t.Wm)("p",null,[(0,t.Uk)("这样一段内容追加到"),(0,t.Wm)("code",null,"head"),(0,t.Uk)("头部后，指示浏览器在空闲时间里去加载"),(0,t.Wm)("code",null,"0.js"),(0,t.Uk)("，这正是"),(0,t.Wm)("code",null,"Prefetching"),(0,t.Uk)("它所能帮我们做到的事情，而"),(0,t.Wm)("code",null,"PreLoading"),(0,t.Uk)("的用法于此类似，请自行测试。")],-1),Gs=(0,t.Wm)("h2",{id:"css代码分割",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#css代码分割","aria-hidden":"true"},"#"),(0,t.Uk)(" CSS代码分割")],-1),Os=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Uk)("当我们在使用"),(0,t.Wm)("code",null,"style-loader"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"css-loader"),(0,t.Uk)("打包"),(0,t.Wm)("code",null,".css"),(0,t.Uk)("文件时会直接把CSS文件打包进"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件中，然后直接把样式通过"),(0,t.Wm)("code",null,"<style></style>"),(0,t.Uk)("的方式写在页面，如果我们要把CSS单独打包在一起，然后通过"),(0,t.Wm)("code",null,"link"),(0,t.Uk)("标签引入，那么可以使用"),(0,t.Wm)("code",null,"mini-css-extract-plugin"),(0,t.Uk)("插件进行打包。")])],-1),Qs=(0,t.Wm)("div",{class:"custom-container warning"},[(0,t.Wm)("p",{class:"custom-container-title"},"WARNING"),(0,t.Wm)("p",null,[(0,t.Wm)("s",null,[(0,t.Uk)("截止到写此文档时，此插件还未支持HMR，意味着我们要使用这个插件进行打包CSS时，为了开发效率，我们需要配置在生产环境下，开发环境依然还是使用"),(0,t.Wm)("code",null,"style-loader"),(0,t.Uk)("进行打包")]),(0,t.Uk)("。"),(0,t.Wm)("br"),(0,t.Wm)("strong",null,"此插件的最新版已支持HMR"),(0,t.Uk)("。")])],-1),Fs=(0,t.Wm)("p",null,[(0,t.Uk)("在配置之前，我们需要使用"),(0,t.Wm)("code",null,"npm install"),(0,t.Uk)("进行安装此插件：")],-1),Js=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Uk)("$ "),(0,t.Wm)("span",{class:"token function"},"npm"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"install"),(0,t.Uk)(" mini-css-extract-plugin -D\n")])])],-1),Ys=(0,t.Wm)("p",null,[(0,t.Uk)("安装完毕后，由于此插件已支持"),(0,t.Wm)("code",null,"HMR"),(0,t.Uk)("，那我们可以把配置写在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("中(以下配置为完整配置，改动参考高亮代码块)：")],-1),Vs=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" path "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'path'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" HtmlWebpackPlugin "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'html-webpack-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" CleanWebpackPlugin "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'clean-webpack-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" MiniCssExtractPlugin "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'mini-css-extract-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  entry"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    main"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./src/index.js'"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  module"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    rules"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"\\.css$"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        use"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" \n            loader"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" MiniCssExtractPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("loader"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            options"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n              hmr"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n              reloadAll"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n            "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token string"},"'css-loader'"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" \n        test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"\\.js$"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        exclude"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"node_modules"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        loader"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"babel-loader"'),(0,t.Uk)(" \n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  plugins"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"HtmlWebpackPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      template"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'src/index.html'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"CleanWebpackPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"MiniCssExtractPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'[name].css'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'all'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  output"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'[name].js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    path"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" path"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"resolve"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("__dirname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'../dist'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),Xs=(0,t.Wm)("p",null,[(0,t.Uk)("配置完毕以后，我们来在"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("目录下新建一个"),(0,t.Wm)("code",null,"style.css"),(0,t.Uk)("文件，它的代码如下：")],-1),Zs=(0,t.Wm)("div",{class:"language-css ext-css"},[(0,t.Wm)("pre",{class:"language-css"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token selector"},"body"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},"color"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)(" green"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),na=(0,t.Wm)("p",null,[(0,t.Uk)("接下来，我们改动一下"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("文件，让它引入"),(0,t.Wm)("code",null,"style.css"),(0,t.Uk)("，它的代码可以这样写：")],-1),sa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./style.css'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" root "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getElementById"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'root'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nroot"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Hello,world'"),(0,t.Uk)("\n")])])],-1),aa=(0,t.Wm)("p",null,[(0,t.Uk)("使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("进行打包，"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("打包目录如下所示：")],-1),ta=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("css\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("css"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n")])])],-1),oa=(0,t.Wm)("div",{class:"custom-container warning"},[(0,t.Wm)("p",{class:"custom-container-title"},"注意"),(0,t.Wm)("p",null,[(0,t.Uk)("如果发现并没有打包生成"),(0,t.Wm)("code",null,"main.css"),(0,t.Uk)("文件，可能是"),(0,t.Wm)("code",null,"Tree Shaking"),(0,t.Uk)("的副作用，应该在"),(0,t.Wm)("code",null,"package.json"),(0,t.Uk)("中添加属性"),(0,t.Wm)("code",null,"sideEffects:['*.css']")])],-1),ea=(0,t.Wm)("h4",{id:"css压缩",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#css压缩","aria-hidden":"true"},"#"),(0,t.Uk)(" CSS压缩")],-1),ca=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"理解"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"CSS"),(0,t.Uk)("压缩的理解是：当我们有两个相同的样式分开写的时候，我们可以把它们合并在一起；为了减少"),(0,t.Wm)("code",null,"CSS"),(0,t.Uk)("文件的体积，我们需要像压缩"),(0,t.Wm)("code",null,"JS"),(0,t.Uk)("文件一样，压缩一下"),(0,t.Wm)("code",null,"CSS"),(0,t.Uk)("文件。")])],-1),pa=(0,t.Wm)("p",null,[(0,t.Uk)("我们再在"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("目录下新建"),(0,t.Wm)("code",null,"style1.css"),(0,t.Uk)("文件，内容如下：")],-1),la=(0,t.Wm)("div",{class:"language-css ext-css"},[(0,t.Wm)("pre",{class:"language-css"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token selector"},"body"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},"line-height"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)(" 100px"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),ka=(0,t.Wm)("p",null,[(0,t.Uk)("在"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("文件中引入此CSS文件")],-1),ma=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./style.css'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./style1.css'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" root "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getElementById"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'root'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nroot"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Hello,world'"),(0,t.Uk)("\n")])])],-1),ua=(0,t.Wm)("p",null,[(0,t.Uk)("使用打包"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("打包命令，我们发现虽然插件帮我们把CSS打包在了一个文件，但并没有合并压缩。")],-1),Wa=(0,t.Wm)("div",{class:"language-css ext-css"},[(0,t.Wm)("pre",{class:"language-css"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token selector"},"body"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},"color"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)(" green"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token selector"},"body"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token property"},"line-height"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)(" 100px"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),ia=(0,t.Wm)("p",null,[(0,t.Uk)("要实现"),(0,t.Wm)("code",null,"CSS"),(0,t.Uk)("的压缩，我们需要再安装一个插件：")],-1),ra=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Uk)("$ "),(0,t.Wm)("span",{class:"token function"},"npm"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"install"),(0,t.Uk)(" optimize-css-assets-webpack-plugin -D\n")])])],-1),Ua=(0,t.Wm)("p",null,[(0,t.Uk)("安装完毕后我们需要再一次改写"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("的配置，如下：")],-1),da=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" optimizaCssAssetsWebpackPlugin "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'optimize-css-assets-webpack-plugin'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置"),(0,t.Uk)("\n  optimization"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    splitChunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      chunks"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'all'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    minimizer"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"optimizaCssAssetsWebpackPlugin"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),ga=(0,t.Wm)("p",null,[(0,t.Uk)("配置完毕以后，我们再次使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("进行打包，打包结果如下所示，可以看见，两个CSS文件的代码已经压缩合并了。")],-1),ha=(0,t.Wm)("div",{class:"language-css ext-css"},[(0,t.Wm)("pre",{class:"language-css"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token selector"},"body"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token property"},"color"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)("red"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token property"},"line-height"),(0,t.Wm)("span",{class:"token punctuation"},":"),(0,t.Uk)("100px"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),ba=(0,t.Wm)("h2",{id:"webpack和浏览器缓存-caching",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#webpack和浏览器缓存-caching","aria-hidden":"true"},"#"),(0,t.Uk)(" Webpack和浏览器缓存(Caching)")],-1),ja=(0,t.Wm)("p",null,[(0,t.Uk)("在讲这一小节之前，让我们清理下项目目录，改写下我们的"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("，删除掉一些没用的文件：")],-1),va=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" dom "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'div'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\ndom"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("innerHTML "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" _"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'Dell'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Lee'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'---'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\ndocument"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"append"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("dom"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),xa=(0,t.Wm)("p",null,"清理后的项目目录可能是这样的：",-1),fa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" build\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("common"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("dev"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prod"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" src\n    "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n    "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" postcss"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("config"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"package"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("json\n")])])],-1),wa=(0,t.Wm)("p",null,[(0,t.Uk)("我们使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("打包命令，打包我们的代码，可能会生成如下的文件：")],-1),ya=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" build\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("common"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("dev"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("prod"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" src\n    "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n    "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"package"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("json\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" postcss"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("config"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n")])])],-1),Ca=(0,t.Wm)("p",null,[(0,t.Uk)("我们可以看到，打包生成的"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("目录下，文件名是"),(0,t.Wm)("code",null,"main.js"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"vendors~main.js"),(0,t.Uk)("，如果我们把"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("目录放在服务器部署的话，当用户第一次访问页面时，浏览器会自动把这两个"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件缓存起来，下一次非强制性刷新页面时，会直接使用缓存起来的文件。"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Uk)(" 假如，我们在用户第一次刷新页面和第二次刷新页面之间，我们修改了我们的代码，并再一次部署，这个时候由于浏览器缓存了这两个"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件，所以用户界面无法获取最新的代码。"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Uk)(" 那么，我们有办法能解决这个问题呢，答案是"),(0,t.Wm)("code",null,"[contenthash]"),(0,t.Uk)("占位符，它能根据文件的内容，在每一次打包时生成一个唯一的hash值，只要我们文件发生了变动，就重新生成一个hash值，没有改动的话，"),(0,t.Wm)("code",null,"[contenthash]"),(0,t.Uk)("则不会发生变动，可以在"),(0,t.Wm)("code",null,"output"),(0,t.Uk)("中进行配置，如下所示：")],-1),Sa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 开发环境下的output配置还是原来的那样，也就是webpack.common.js中的output配置"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 因为开发环境下，我们不用考虑缓存问题"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// webpack.prod.js中添加output配置"),(0,t.Uk)("\noutput"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  filename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'[name].[contenthash].js'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n  chunkFilename"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'[name].[contenthash].js'"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),_a=(0,t.Wm)("p",null,[(0,t.Uk)("使用"),(0,t.Wm)("code",null,"npm run build"),(0,t.Uk)("进行打包，"),(0,t.Wm)("code",null,"dist"),(0,t.Uk)("打包目录的结果如下所示，可以看到每一个"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("文件都有一个唯一的"),(0,t.Wm)("code",null,"hash"),(0,t.Uk)("值，这样配置后就能有效解决浏览器缓存的问题。")],-1),za=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" dist\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" index"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("html\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token number"},"8"),(0,t.Uk)("bef05e11ca1dc804836"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token number"},"8"),(0,t.Uk)("bef05e11ca1dc804836"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Uk)("b711ce6ccdc861de436"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js\n"),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Uk)("   "),(0,t.Wm)("span",{class:"token operator"},"|"),(0,t.Wm)("span",{class:"token operator"},"--"),(0,t.Uk)(" vendors"),(0,t.Wm)("span",{class:"token operator"},"~"),(0,t.Uk)("main"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token number"},"4"),(0,t.Uk)("b711ce6ccdc861de436"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("js"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("map\n")])])],-1),Pa=(0,t.Wm)("h2",{id:"shimming",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#shimming","aria-hidden":"true"},"#"),(0,t.Uk)(" Shimming")],-1),qa=(0,t.Wm)("p",null,[(0,t.Uk)("有时候我们在引入第三方库的时候，不得不处理一些全局变量的问题，例如jQuery的"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("，lodash的"),(0,t.Wm)("code",null,"_"),(0,t.Uk)("，但由于一些老的第三方库不能直接修改它的代码，这时我们能不能定义一个全局变量，当文件中存在"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,"_"),(0,t.Uk)("的时候自动的帮他们引入对应的包。")],-1),La=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"解决办法"),(0,t.Wm)("p",null,[(0,t.Uk)("这个问题，可以使用"),(0,t.Wm)("code",null,"ProvidePlugin"),(0,t.Uk)("插件来解决，这个插件已经被 Webpack 内置，无需安装，直接使用即可。")])],-1),Ta=(0,t.Wm)("p",null,[(0,t.Uk)("在"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("目录下新建"),(0,t.Wm)("code",null,"jquery.ui.js"),(0,t.Uk)("文件，代码如下所示，它使用了"),(0,t.Wm)("code",null,"jQuery"),(0,t.Uk)("的"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("符号，创建这个文件目的是为了来模仿第三方库。")],-1),Ea=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"export"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token constant"},"UI"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token function"},"$"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'body'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"css"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'background'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'green'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),$a=(0,t.Wm)("p",null,[(0,t.Uk)("创建完毕后，我们修改一下"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("文件， 让它使用刚才我们创建的文件：")],-1),Ha=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" _ "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(" $ "),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'jquery'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"import"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token constant"},"UI"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"from"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'./jquery.ui'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token constant"},"UI"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" dom "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"$"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token template-string"},[(0,t.Wm)("span",{class:"token template-punctuation string"},"`"),(0,t.Wm)("span",{class:"token string"},"<div>"),(0,t.Wm)("span",{class:"token interpolation"},[(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("_"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"join"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token string"},"'Dell'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Lee'"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'---'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t.Wm)("span",{class:"token string"},"</div>"),(0,t.Wm)("span",{class:"token template-punctuation string"},"`")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"$"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'#root'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"append"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("dom"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Ma=(0,t.Wm)("p",null,[(0,t.Uk)("接下来我们使用"),(0,t.Wm)("code",null,"npm run dev"),(0,t.Uk)("进行打包，它的结果如下：")],-1),Ra=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:p,alt:"打包结果"})],-1),Da=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"问题："),(0,t.Uk)(" 我们发现，根本运行不起来，报错"),(0,t.Wm)("code",null,"$ is not defined"),(0,t.Wm)("br"),(0,t.Wm)("strong",null,"解答："),(0,t.Uk)(" 这是因为虽然我们在"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("中引入的"),(0,t.Wm)("code",null,"jquery"),(0,t.Uk)("文件，但"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("符号只能在"),(0,t.Wm)("code",null,"index.js"),(0,t.Uk)("才有效，在"),(0,t.Wm)("code",null,"jquery.ui.js"),(0,t.Uk)("无效，报错是因为"),(0,t.Wm)("code",null,"jquery.ui.js"),(0,t.Uk)("中"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("符号找不到引起的。"),(0,t.Wm)("br")],-1),Ia=(0,t.Wm)("p",null,[(0,t.Uk)("以上场景完美再现了我们最开始提到的问题，那么我们接下来就通过配置解决，首先在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("文件中使用"),(0,t.Wm)("code",null,"ProvidePlugin"),(0,t.Uk)("插件：")],-1),Ba=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"说明"),(0,t.Wm)("p",null,[(0,t.Uk)("配置"),(0,t.Wm)("code",null,"$:'jquery'"),(0,t.Uk)("，只要我们文件中使用了"),(0,t.Wm)("code",null,"$"),(0,t.Uk)("符号，它就会自动帮我们引入"),(0,t.Wm)("code",null,"jquery"),(0,t.Uk)("，相当于"),(0,t.Wm)("code",null,"import $ from 'jquery'")])],-1),Aa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"const"),(0,t.Uk)(" webpack "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"require"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'webpack'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nmodule"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// 其它配置"),(0,t.Uk)("\n  plugins"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},[(0,t.Uk)("webpack"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("ProvidePlugin")]),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      $"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'jquery'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      _"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'lodash'"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),Na=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"打包结果："),(0,t.Uk)(" 使用"),(0,t.Wm)("code",null,"npm run dev"),(0,t.Uk)("进行打包，打包结果如下，可以发现，项目已经可以正确运行了。")],-1),Ka=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:l,alt:"打包结果"})],-1),Ga=(0,t.Wm)("h2",{id:"处理全局this指向问题",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#处理全局this指向问题","aria-hidden":"true"},"#"),(0,t.Uk)(" 处理全局this指向问题")],-1),Oa=(0,t.Wm)("p",null,[(0,t.Uk)("我们现在来思考一个问题，一个模块中的"),(0,t.Wm)("code",null,"this"),(0,t.Uk)("到底指向什么，是模块自身还是全局的"),(0,t.Wm)("code",null,"window"),(0,t.Uk)("对象")],-1),Qa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// index.js代码，在浏览器中输出：false"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"this"),(0,t.Wm)("span",{class:"token operator"},"==="),(0,t.Uk)("window"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),Fa=(0,t.Wm)("p",null,[(0,t.Uk)("如上所示，如果我们使用"),(0,t.Wm)("code",null,"npm run dev"),(0,t.Uk)("运行项目，运行"),(0,t.Wm)("code",null,"index.html"),(0,t.Uk)("时，会在浏览器的"),(0,t.Wm)("code",null,"console"),(0,t.Uk)("面板输出"),(0,t.Wm)("code",null,"false"),(0,t.Uk)("，证明在模块中"),(0,t.Wm)("code",null,"this"),(0,t.Uk)("指向模块自身，而不是全局的"),(0,t.Wm)("code",null,"window"),(0,t.Uk)("对象，那么我们有什么办法来解决这个问题呢？")],-1),Ja=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"解决办法"),(0,t.Wm)("p",null,[(0,t.Uk)("安装使用"),(0,t.Wm)("code",null,"imports-loader"),(0,t.Uk)("来解决这个问题")])],-1),Ya=(0,t.Wm)("div",{class:"language-bash ext-sh"},[(0,t.Wm)("pre",{class:"language-bash"},[(0,t.Wm)("code",null,[(0,t.Uk)("$ "),(0,t.Wm)("span",{class:"token function"},"npm"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"install"),(0,t.Uk)(" imports-loader -D\n")])])],-1),Va=(0,t.Wm)("p",null,[(0,t.Uk)("安装完毕后，我们在"),(0,t.Wm)("code",null,"webpack.common.js"),(0,t.Uk)("加一点配置，在"),(0,t.Wm)("code",null,".js"),(0,t.Uk)("的loader处理中，添加"),(0,t.Wm)("code",null,"imports-loader")],-1),Xa=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("module"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("exports "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// ... 其它配置"),(0,t.Uk)("\n  module"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    rules"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" \n        test"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"\\.js$"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        exclude"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"node_modules"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" \n        use"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            loader"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'babel-loader'"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            loader"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'imports-loader?this=>window'"),(0,t.Uk)("\n          "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t.Wm)("div",{class:"highlight-lines"},[(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("div",{class:"highlight-line"}," "),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br"),(0,t.Wm)("br")])],-1),Za=(0,t.Wm)("p",null,[(0,t.Uk)("配置完毕后使用"),(0,t.Wm)("code",null,"npm run dev"),(0,t.Uk)("来进行打包，查看"),(0,t.Wm)("code",null,"console"),(0,t.Uk)("控制台输出"),(0,t.Wm)("code",null,"true"),(0,t.Uk)("，证明"),(0,t.Wm)("code",null,"this"),(0,t.Uk)("这个时候已经指向了全局"),(0,t.Wm)("code",null,"window"),(0,t.Uk)("对象，问题解决。")],-1),nt=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:k,alt:"打包结果"})],-1),st={render:function(n,s){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[m,u,W,i,r,U,d,g,h,b,j,v,x,f,w,y,C,S,_,z,P,q,L,(0,t.Wm)("p",null,[T,E,$,H,(0,t.Wm)("a",M,[R,(0,t.Wm)(a)]),D,I,B]),A,N,K,G,O,Q,F,J,Y,V,X,Z,nn,sn,an,tn,on,en,cn,pn,ln,kn,mn,un,Wn,rn,Un,dn,gn,hn,bn,jn,vn,xn,fn,wn,yn,Cn,Sn,_n,zn,Pn,qn,Ln,Tn,En,$n,Hn,Mn,Rn,Dn,In,Bn,An,Nn,Kn,Gn,On,Qn,Fn,Jn,Yn,Vn,Xn,Zn,ns,ss,as,ts,os,es,cs,ps,ls,ks,ms,us,Ws,is,rs,Us,ds,gs,hs,bs,js,vs,xs,fs,ws,ys,Cs,Ss,_s,zs,Ps,qs,Ls,Ts,Es,$s,Hs,Ms,Rs,Ds,Is,Bs,As,Ns,Ks,Gs,Os,Qs,Fs,Js,Ys,Vs,Xs,Zs,na,sa,aa,ta,oa,ea,ca,pa,la,ka,ma,ua,Wa,ia,ra,Ua,da,ga,ha,ba,ja,va,xa,fa,wa,ya,Ca,Sa,_a,za,Pa,qa,La,Ta,Ea,$a,Ha,Ma,Ra,Da,Ia,Ba,Aa,Na,Ka,Ga,Oa,Qa,Fa,Ja,Ya,Va,Xa,Za,nt],64)}}}}]);