(self.webpackChunkgordan404wiki=self.webpackChunkgordan404wiki||[]).push([[8503],{7593:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-8f142a90",path:"/interview/browser.html",title:"前端面试指北",lang:"zh-CN",frontmatter:{sidebar:"auto"},excerpt:"",headers:[{level:2,title:"浏览器相关基础面试题",slug:"浏览器相关基础面试题",children:[{level:3,title:"事件机制",slug:"事件机制",children:[]},{level:3,title:"跨域",slug:"跨域",children:[]},{level:3,title:"浏览器存储",slug:"浏览器存储",children:[]}]},{level:2,title:"浏览器其他面试题",slug:"浏览器其他面试题",children:[{level:3,title:"缓存机制",slug:"缓存机制",children:[]},{level:3,title:"渲染原理",slug:"渲染原理",children:[]},{level:3,title:"回流（Reflow/重排）与重绘（Repaint）",slug:"回流-reflow-重排-与重绘-repaint",children:[]}]},{level:2,title:"安全防范面试题",slug:"安全防范面试题",children:[{level:3,title:"XSS跨域脚本攻击",slug:"xss跨域脚本攻击",children:[]},{level:3,title:"CSP内容安全策略",slug:"csp内容安全策略",children:[]},{level:3,title:"CSRF跨域请求伪造",slug:"csrf跨域请求伪造",children:[]},{level:3,title:"点击劫持",slug:"点击劫持",children:[]},{level:3,title:"中间人攻击",slug:"中间人攻击",children:[]}]}],filePathRelative:"interview/browser.md",git:{updatedTime:1628468458e3,contributors:[{name:"lishuaixingNewBee",email:"vae.china@foxmail.com",commits:3}]}}},6709:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>Ns});var t=a(4057),o=a(201),e=a(5687),c=a(8070),l=a(4817),p=a(2732),m=a(2678),k=a(1703),u=a(7400);const W=(0,t.Wm)("h1",{id:"前端面试指北",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#前端面试指北","aria-hidden":"true"},"#"),(0,t.Uk)(" 前端面试指北")],-1),i=(0,t.Wm)("h2",{id:"浏览器相关基础面试题",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#浏览器相关基础面试题","aria-hidden":"true"},"#"),(0,t.Uk)(" 浏览器相关基础面试题")],-1),r=(0,t.Wm)("h3",{id:"事件机制",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#事件机制","aria-hidden":"true"},"#"),(0,t.Uk)(" 事件机制")],-1),d=(0,t.Wm)("h4",{id:"注册事件",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#注册事件","aria-hidden":"true"},"#"),(0,t.Uk)(" 注册事件")],-1),U=(0,t.Wm)("p",null,[(0,t.Uk)("注册事件，我们一般使用"),(0,t.Wm)("code",null,"addEventListener(name, callback, boolean)"),(0,t.Uk)("函数，该函数支持三个参数，参数说明如下：")],-1),g=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"name"),(0,t.Uk)("：代表待注册事件的名字，例如："),(0,t.Wm)("code",null,"click"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,"mouseover")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"callback"),(0,t.Uk)("：代表注册事件的回调函数")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"boolean"),(0,t.Uk)("：一个"),(0,t.Wm)("code",null,"boolean"),(0,t.Uk)("值，为"),(0,t.Wm)("code",null,"true"),(0,t.Uk)("代表事件捕获时触发，为"),(0,t.Wm)("code",null,"false"),(0,t.Uk)("时代表事件冒泡时触发。参数缺省时默认为"),(0,t.Wm)("code",null,"false")])],-1),h=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 一个注册事件的案例"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 点击DOM元素时。顺序打印出：捕获时触发 冒泡时触发"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" box "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getElementById"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'box'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token constant"},"DOM"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Uk)(" \n  box"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function-variable function"},"onclick"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token constant"},"DOM"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Uk)("\n  box"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'捕获时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  box"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'冒泡时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),f=(0,t.Wm)("h4",{id:"事件触发顺序",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#事件触发顺序","aria-hidden":"true"},"#"),(0,t.Uk)(" 事件触发顺序")],-1),v=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("在浏览器中，事件的触发顺序一般而言依据："),(0,t.Wm)("strong",null,"捕获"),(0,t.Uk)("->"),(0,t.Wm)("strong",null,"目标阶段"),(0,t.Uk)("->"),(0,t.Wm)("strong",null,"冒泡"),(0,t.Uk)("三个顺序。但事件的触发顺序并不总是按以上顺序执行，当我们给同一个DOM元素同时注册捕获和冒泡事件时，事件的触发顺序是按你"),(0,t.Wm)("strong",null,"注册事件的顺序"),(0,t.Uk)("来执行的。")])],-1),b=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"捕获"),(0,t.Uk)(": window→document→html→boby→...目标元素")],-1),x=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"冒泡"),(0,t.Uk)(": 目标元素→boby→html→document→window")],-1),w=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 点击DOM元素时。顺序打印出：冒泡时触发 捕获时触发"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" box "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getElementById"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'box'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nbox"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'冒泡时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nbox"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'捕获时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),S=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"阻止事件冒泡："),(0,t.Uk)(),(0,t.Wm)("code",null,"stopPropagation()"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"stopImmediaPropagation()"),(0,t.Uk)("方法都能阻止事件的向上冒泡，但这两者是有区别的："),(0,t.Wm)("code",null,"stopImmediaPropagation()"),(0,t.Uk)("还能阻止目标执行别的注册事件。")],-1),y=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 阻止事件冒泡"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 1. 当不阻止冒泡时，window的click会触发"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 2. 当使用stopPropagation()时，window的click不会被触发"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 3. 当使用stopImmediatePropagation()时，DOM的捕获事件不会触发，window的click不会触发"),(0,t.Uk)("\nbox"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'冒泡时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// event.preventDefault()     // 阻止默认事件"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// event.stopPropagation();   // 阻止冒泡"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// event.stopImmediatePropagation(); // 事件响应优先级,一个按钮绑定两个事件，在其中一个事件回调中调用此方法，另一个事件不会执行。"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// event.currentTarget // 可做事件委托，把子元素的事件都代理绑定在父级元素上，这样只需要绑定一次，然后通过它，就可以获取当前触发的具体节点。"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token comment"},"// event.target // 当前(父级)所绑定的事件 。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nbox"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'捕获时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token boolean"},"true"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nwindow"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'click'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"event"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'子元素点击事件向上冒泡时触发'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])])],-1),T=(0,t.Wm)("h4",{id:"自定义事件",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#自定义事件","aria-hidden":"true"},"#"),(0,t.Uk)(" 自定义事件")],-1),C=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"Cunstome 和 Event: 区别Cunstome可以多传一个对象作为参数")],-1),P=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" eve "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Event"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'cunstome'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Cunstome"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'cunstome'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" params"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\ndom"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'cunstome'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'cunstome'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\ndom"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"dispatchEvent"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("eve"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 触发事件"),(0,t.Uk)("\n")])])],-1),j=(0,t.Wm)("h3",{id:"跨域",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#跨域","aria-hidden":"true"},"#"),(0,t.Uk)(" 跨域")],-1),M=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"同源策略"),(0,t.Wm)("p",null,[(0,t.Uk)("同源策略是指，一个源的客户端脚本在没有明确授权的情况下，不能访问另一个源的客户端脚本。当一个URL和另一个URL，只要"),(0,t.Wm)("strong",null,"协议"),(0,t.Uk)("、"),(0,t.Wm)("strong",null,"域名"),(0,t.Uk)("或者"),(0,t.Wm)("strong",null,"端口号"),(0,t.Uk)("有一个不同，则就会出现跨域。 解决跨域常用方法有：")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"JSONP"),(0,t.Wm)("li",null,"跨域资源共享（CORS）"),(0,t.Wm)("li",null,"nginx代理跨域"),(0,t.Wm)("li",null,"nodejs中间件代理跨域"),(0,t.Wm)("li",null,"WebSocket协议跨域"),(0,t.Wm)("li",null,"postMessage"),(0,t.Wm)("li",null,"document.domain + iframe跨域"),(0,t.Wm)("li",null,"location.hash + iframe"),(0,t.Wm)("li",null,"window.name + iframe跨域")])],-1),O=(0,t.Wm)("h4",{id:"jsonp实现跨域",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#jsonp实现跨域","aria-hidden":"true"},"#"),(0,t.Uk)(" JSONP实现跨域")],-1),I=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"原理"),(0,t.Wm)("p",null,[(0,t.Uk)("JSONP实现跨域的原理是利用"),(0,t.Wm)("code",null,"script"),(0,t.Uk)("标签没有跨域限制，通过"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("指向一个"),(0,t.Wm)("code",null,"ajax"),(0,t.Uk)("的URL，最后跟一个回调函数"),(0,t.Wm)("code",null,"callback")])],-1),L=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 一个JSONP跨域的案例"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("script src"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},'"http://www.baidu.com/getUserInfo?name=张三&callback=jsonp"'),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"jsonp"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'JSONP实现跨域'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),E=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 实现自己的JSONP"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function-variable function"},"jsonp"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("url"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" callback")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" cbName "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'callback_'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Date"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getTime"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" queryString "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" url"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"indexOf"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'?'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"?"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'?'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'&'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" k "),(0,t.Wm)("span",{class:"token keyword"},"in"),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    queryString "),(0,t.Wm)("span",{class:"token operator"},"+="),(0,t.Uk)(" k "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'='"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'&'"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  queryString "),(0,t.Wm)("span",{class:"token operator"},"+="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'callback='"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" cbName"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" script "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"createElement"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'script'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  script"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("src "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" url "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" queryString"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  window"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Uk)("cbName"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token function"},"callback"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n    document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"removeChild"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("body"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"appendChild"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 实测"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"jsonp"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'http://api.douban.com/v2/movie/in_theaters'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Wm)("span",{class:"token string"},"'count'"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n")])])],-1),D=(0,t.Wm)("h4",{id:"cors实现跨域",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#cors实现跨域","aria-hidden":"true"},"#"),(0,t.Uk)(" CORS实现跨域")],-1),R=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("CORS："),(0,t.Wm)("code",null,"CORS"),(0,t.Uk)("需要浏览器和后端同时配合才能生效，后端通过设置"),(0,t.Wm)("code",null,"Access-Control-Allow-Origin"),(0,t.Uk)("就可以开启哪些域名可以使用"),(0,t.Wm)("code",null,"CORS"),(0,t.Uk)("跨域，在进行"),(0,t.Wm)("code",null,"CORS"),(0,t.Uk)("跨域请求时，会出现简单请求或者复杂请求。")])],-1),H=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"CORS简单请求"),(0,t.Uk)("：当请求方式为"),(0,t.Wm)("code",null,"get"),(0,t.Uk)("，"),(0,t.Wm)("code",null,"head"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"post"),(0,t.Uk)("之一并且"),(0,t.Wm)("code",null,"Content-Type"),(0,t.Uk)("为"),(0,t.Wm)("code",null,"text/plain"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"multipart/form-data"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"application/x-www-form-urlencoded"),(0,t.Uk)("三种之一时，就是简单请求。")],-1),q=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"CORS复杂请求："),(0,t.Uk)(" 当不符合简单请求时，就是复杂请求，对于复杂请求来说，首先会发送一个"),(0,t.Wm)("code",null,"option"),(0,t.Uk)("请求，用于知道服务器是否允许跨域请求。")],-1),N=(0,t.Wm)("h4",{id:"document-domain实现跨域",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#document-domain实现跨域","aria-hidden":"true"},"#"),(0,t.Uk)(" document.domain实现跨域")],-1),A=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("document.domain只能用于"),(0,t.Wm)("strong",null,"二级域名相同"),(0,t.Uk)("的情况下")]),(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 域名a.test.com 和域名b.test.com"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 设置如下代码后，二级域名为test.com的网站都能实现跨域"),(0,t.Uk)("\ndocument"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("domain "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'test.com'"),(0,t.Uk)("\n")])])])],-1),F=(0,t.Wm)("h4",{id:"postmessage",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#postmessage","aria-hidden":"true"},"#"),(0,t.Uk)(" postMessage")],-1),X=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"postMessage")]),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"页面和其打开的新窗口的数据传递"),(0,t.Wm)("li",null,"多窗口之间消息传递"),(0,t.Wm)("li",null,"页面与嵌套的iframe消息传递"),(0,t.Wm)("li",null,"上面三个场景的跨域数据传递")])],-1),Z=(0,t.Wm)("div",{class:"language-html ext-html"},[(0,t.Wm)("pre",{class:"language-html"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("body")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("iframe")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token attr-name"},"src"),(0,t.Wm)("span",{class:"token attr-value"},[(0,t.Wm)("span",{class:"token punctuation attr-equals"},"="),(0,t.Wm)("span",{class:"token punctuation"},'"'),(0,t.Uk)("https://www.baidu.com"),(0,t.Wm)("span",{class:"token punctuation"},'"')]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token attr-name"},"frameborder"),(0,t.Wm)("span",{class:"token attr-value"},[(0,t.Wm)("span",{class:"token punctuation attr-equals"},"="),(0,t.Wm)("span",{class:"token punctuation"},'"'),(0,t.Uk)("0"),(0,t.Wm)("span",{class:"token punctuation"},'"')]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"</"),(0,t.Uk)("iframe")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"</"),(0,t.Uk)("body")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])])],-1),_=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 父页面发送请求"),(0,t.Uk)("\nwindow"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("frames"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"0"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"postMessage"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'getcolor'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'*'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 父页面接受请求"),(0,t.Uk)("\nwindow"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'message'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"e"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("e"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("data"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 打印red"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// 子页面发送请求"),(0,t.Uk)("\nwindow"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"addEventListener"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'message'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"e"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  window"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("parent"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"postMessage"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'red'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'*'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token boolean"},"false"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),z=(0,t.Wm)("h4",{id:"nginx代理跨域",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#nginx代理跨域","aria-hidden":"true"},"#"),(0,t.Uk)(" nginx代理跨域")],-1),J=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"nginx配置解决iconfont跨域")])],-1),B=(0,t.Wm)("p",null,"浏览器跨域访问js、css、img等常规静态资源被同源策略许可，但iconfont字体文件(eot|otf|ttf|woff|svg)例外，此时可在nginx的静态资源服务器中加入以下配置。",-1),G=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("location "),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  add_header Access"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("Control"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("Allow"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("Origin "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),Y=(0,t.Wm)("ol",{start:"2"},[(0,t.Wm)("li",null,[(0,t.Wm)("strong",null,"nginx反向代理接口跨域")])],-1),V=(0,t.Wm)("p",null,"跨域原理： 同源策略是浏览器的安全策略，不是HTTP协议的一部分。服务器端调用HTTP接口只是使用HTTP协议，不会执行JS脚本，不需要同源策略，也就不存在跨越问题。",-1),Q=(0,t.Wm)("p",null,"实现思路：通过nginx配置一个代理服务器（域名与domain1相同，端口不同）做跳板机，反向代理访问domain2接口，并且可以顺便修改cookie中domain信息，方便当前域cookie写入，实现跨域登录。",-1),K=(0,t.Wm)("div",{class:"language-text ext-text"},[(0,t.Wm)("pre",{class:"language-text"},[(0,t.Wm)("code",null,"#proxy服务器\nserver {\n    listen       81;\n    server_name  www.domain1.com;\n\n    location / {\n        proxy_pass   http://www.domain2.com:8080;  #反向代理\n        proxy_cookie_domain www.domain2.com www.domain1.com; #修改cookie里域名\n        index  index.html index.htm;\n\n        # 当用webpack-dev-server等中间件代理接口访问nignx时，此时无浏览器参与，故没有同源限制，下面的跨域配置可不启用\n        add_header Access-Control-Allow-Origin http://www.domain1.com;  #当前端只跨域不带cookie时，可为*\n        add_header Access-Control-Allow-Credentials true;\n    }\n}\n")])],-1),$=(0,t.Wm)("h3",{id:"浏览器存储",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#浏览器存储","aria-hidden":"true"},"#"),(0,t.Uk)(" 浏览器存储")],-1),nn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"浏览器存储有如下四种方法，每种方法都有不同支持，具体特性请参考表格"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"cookie"),(0,t.Wm)("li",null,"localStorage"),(0,t.Wm)("li",null,"sessionStorage"),(0,t.Wm)("li",null,"indexDB")])],-1),sn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:o.Z,alt:"浏览器存储四种方法"})],-1),an=(0,t.Wm)("h4",{id:"cookie",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#cookie","aria-hidden":"true"},"#"),(0,t.Uk)(" Cookie")],-1),tn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"设置cookie")],-1),on=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"setCookie"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("cname"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" cvalue"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" exdays")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" d "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"Date"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  d"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setTime"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("d"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getTime"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("exdays"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},"24"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},"60"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},"60"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},"1000"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" expires "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"expires="'),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)("d"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"toUTCString"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("cookie "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" cname "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"="'),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" cvalue "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"; "'),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" expires"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"setCookie"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'why'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"30"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),en=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"获取cookie")],-1),cn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"getCookie"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"name"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" arr"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" reg "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token class-name"},"RegExp"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},'"(^| )"'),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(" name "),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"=([^;]*)(;|$)"'),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("arr "),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)(" document"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("cookie"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"match"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("reg"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token function"},"unescape"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("arr"),(0,t.Wm)("span",{class:"token punctuation"},"["),(0,t.Wm)("span",{class:"token number"},"2"),(0,t.Wm)("span",{class:"token punctuation"},"]"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token keyword"},"else"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"null"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token function"},"setCookie"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'why'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token number"},"30"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token function"},"getCookie"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 打印why"),(0,t.Uk)("\n")])])],-1),ln=(0,t.Wm)("h4",{id:"localstorage-和-sessionstorage",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#localstorage-和-sessionstorage","aria-hidden":"true"},"#"),(0,t.Uk)(" localStorage 和 sessionStorage")],-1),pn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"设置localStorage和sessionStorage")],-1),mn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("localStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'why'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nsessionStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'age'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"23"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n")])])],-1),kn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"获取localStorage和sessionStorage")],-1),un=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("localStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token string"},"'why'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("localStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'name'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token comment"},"// 打印why"),(0,t.Uk)("\nsessionStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"setItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'age'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token number"},"23"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\nconsole"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Uk)("sessionStorage"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"getItem"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'age'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Wm)("span",{class:"token comment"},"// 打印23"),(0,t.Uk)("\n")])])],-1),Wn=(0,t.Wm)("h4",{id:"service-worker",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#service-worker","aria-hidden":"true"},"#"),(0,t.Uk)(" service worker")],-1),rn=(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"Service Worker"),(0,t.Uk)("是运行在浏览器背后的独立进程，一般可以用来实现缓存功能，实现"),(0,t.Wm)("code",null,"Service Worker"),(0,t.Uk)("的话，必须使用https传输协议，一个实现"),(0,t.Wm)("code",null,"Service Worker"),(0,t.Uk)("缓存"),(0,t.Wm)("code",null,"js"),(0,t.Uk)("文件可以如下写")],-1),dn=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token keyword"},"if"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'serviceWorker'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"in"),(0,t.Uk)(" navigator"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  navigator"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("serviceWorker"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"register"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'./1.js'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"then"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"success"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'注册成功'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"catch"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"error"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    console"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"log"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'注册失败'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])])],-1),Un=(0,t.Wm)("h2",{id:"浏览器其他面试题",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#浏览器其他面试题","aria-hidden":"true"},"#"),(0,t.Uk)(" 浏览器其他面试题")],-1),gn=(0,t.Wm)("p",null,[(0,t.Uk)("一个浏览器数据请求会经历三个步骤："),(0,t.Wm)("strong",null,"发起网络请求"),(0,t.Uk)("、"),(0,t.Wm)("strong",null,"后端处理"),(0,t.Uk)("、"),(0,t.Wm)("strong",null,"浏览器响应"),(0,t.Uk)("。浏览器缓存可以让我们在第一步和第三步中优化性能。")],-1),hn=(0,t.Wm)("h3",{id:"缓存机制",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#缓存机制","aria-hidden":"true"},"#"),(0,t.Uk)(" 缓存机制")],-1),fn=(0,t.Wm)("h4",{id:"缓存位置",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#缓存位置","aria-hidden":"true"},"#"),(0,t.Uk)(" 缓存位置")],-1),vn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"缓存在不同的位置，它的优先级是不同的，缓存按优先级可以划分为："),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"Service Worker可以让我们自由控制应该缓存哪些文件(PWA实现的重要手段)"),(0,t.Wm)("li",null,"Memory Cache(内存缓存)内存缓存读取效率高，但一旦我们关闭了浏览器，内存缓存也就没有了。"),(0,t.Wm)("li",null,"Disk Cache(硬盘缓存)与内存缓存相比，硬盘缓存具有量大以及时效的两大优点。"),(0,t.Wm)("li",null,[(0,t.Uk)("Push Cache当前三者缓存都没有命中时，才会读取Push Cache中的缓存信息，但此种方式的缓存信息时间较短，只在会话"),(0,t.Wm)("code",null,"Session"),(0,t.Uk)("中存在，一旦会话结束也就释放了。")]),(0,t.Wm)("li",null,"当以上缓存都没有命中时，才会发起请求。")])],-1),bn=(0,t.Wm)("h4",{id:"缓存策略",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#缓存策略","aria-hidden":"true"},"#"),(0,t.Uk)(" 缓存策略")],-1),xn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("通常来说，浏览器缓存策略分为两种："),(0,t.Wm)("strong",null,"强缓存"),(0,t.Uk)("和"),(0,t.Wm)("strong",null,"协商缓存"),(0,t.Uk)("，缓存策略可通过HTTP Header来实现。")])],-1),wn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"强缓存："),(0,t.Uk)(" 强缓存可以通过设置"),(0,t.Wm)("code",null,"Expires"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"Cache-Control"),(0,t.Uk)("来实现，强缓存表示在缓存期间，不需要请求，"),(0,t.Wm)("code",null,"State Code"),(0,t.Uk)("为200，并且Size显示from disk cache或from memory cach, "),(0,t.Wm)("code",null,"Cache-Control"),(0,t.Uk)("可以组合使用多个指令，常见指令如下所示： "),(0,t.Wm)("img",{src:e.Z,alt:"缓存指令"})],-1),Sn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"Expires："),(0,t.Uk)(" 缓存过期时间，用来指定资源到期的时间，是服务器端的具体的时间点，HTTP/1 的产物，受限于本地时间，如果修改了本地时间，可能会造成缓存失效。Expires: Wed, 22 Oct 2018 08:41:00 GMT表示资源会在 Wed, 22 Oct 2018 08:41:00 GMT 后过期，需要再次请求。")],-1),yn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"Cache-Control："),(0,t.Uk)(),(0,t.Wm)("code",null,"Cache-Control:max-age=300"),(0,t.Uk)(" max-age代表相对时间，不管服务端客户端时间是否一致，以客户端为主，拿个这个请求300m之内不会再次请求服务器了。")],-1),Tn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"协商缓存："),(0,t.Uk)(" 协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发起请求验证资源是否有更新，可通过设置HTTP Header的"),(0,t.Wm)("code",null,"Last-Modified"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"ETag"),(0,t.Uk)("来实现，如果资源没有改变，"),(0,t.Wm)("code",null,"State Code"),(0,t.Uk)("为304")],-1),Cn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"Last-Modified(上次修改时间)和If-Modified-Since"),(0,t.Uk)(" 浏览器在第一次访问资源时，服务器返回资源的同时，在response header中添加 Last-Modified的header，值是这个资源在服务器上的最后修改时间，浏览器接收后缓存文件和header； 浏览器下一次请求这个资源，浏览器检测到有 Last-Modified这个header，于是添加If-Modified-Since这个header，值就是Last-Modified中的值；服务器再次收到这个资源请求，会根据 If-Modified-Since 中的值与服务器中这个资源的最后修改时间对比，如果没有变化，返回304和空的响应体，直接从缓存读取，如果If-Modified-Since的时间小于服务器中这个资源的最后修改时间，说明文件有更新，于是返回新的资源文件和200")],-1),Pn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"但是 Last-Modified 存在一些弊端：")],-1),jn=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"如果本地打开缓存文件，即使没有对文件进行修改，但还是会造成 Last-Modified 被修改，服务端不能命中缓存导致发送相同的资源"),(0,t.Wm)("li",null,"因为 Last-Modified 只能以秒计时，如果在不可感知的时间内修改完成文件，那么服务端会认为资源还是命中了，不会返回正确的资源")],-1),Mn=(0,t.Wm)("p",null,[(0,t.Uk)("既然根据文件修改时间来决定是否缓存尚有不足，能否可以直接根据文件内容是否修改来决定缓存策略？所以在 HTTP / 1.1 出现了ETag和If-None-Match "),(0,t.Wm)("strong",null,"Etag:"),(0,t.Uk)(" 是服务器响应请求时，返回当前资源文件的一个唯一标识(由服务器生成)，只要资源有变化，Etag就会重新生成(相当于哈希值)。")],-1),On=(0,t.Wm)("h3",{id:"渲染原理",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#渲染原理","aria-hidden":"true"},"#"),(0,t.Uk)(" 渲染原理")],-1),In=(0,t.Wm)("h4",{id:"dom树",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#dom树","aria-hidden":"true"},"#"),(0,t.Uk)(" DOM树")],-1),Ln=(0,t.Wm)("p",null,[(0,t.Uk)("浏览器在接受到服务器传递回来的字节流数据后，会经过转换，把"),(0,t.Wm)("code",null,"0"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"1"),(0,t.Uk)("的字节流数据转换成DOM树结构，会经历如下图所示的过程：")],-1),En=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:c.Z,alt:"DOM树渲染结构过程"}),(0,t.Uk)(" 最终可能回渲染成如下的DOM树结构：")],-1),Dn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:l.Z,alt:"DOM树结构"})],-1),Rn=(0,t.Wm)("h4",{id:"cssdom",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#cssdom","aria-hidden":"true"},"#"),(0,t.Uk)(" CSSDOM")],-1),Hn=(0,t.Wm)("p",null,"与DOM树渲染过程类似，CSSOM树渲染过程会经历如下图所示的过程：",-1),qn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:p.Z,alt:"CSSOM渲染过程"})],-1),Nn=(0,t.Wm)("h4",{id:"dom和cssom树合并",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#dom和cssom树合并","aria-hidden":"true"},"#"),(0,t.Uk)(" DOM和CSSOM树合并")],-1),An=(0,t.Wm)("p",null,"当DOM树和CSSOM树渲染完毕后，就会合并在一起形成一个渲染树，渲染树并不是简单的将DOM树和CSSOM树简单的合并在一起，渲染树只包含需要显示的DOM节点。渲染树合并完毕后，然后会根据渲染树进行布局，随后调用GPU进行绘制，显示在屏幕上。",-1),Fn=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:m.Z,alt:"渲染树"})],-1),Xn=(0,t.Wm)("h4",{id:"从浏览器地址栏输入url到页面",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#从浏览器地址栏输入url到页面","aria-hidden":"true"},"#"),(0,t.Uk)(" 从浏览器地址栏输入url到页面")],-1),Zn=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"浏览器根据 DNS 服务器得到域名的 IP 地址")],-1),_n=(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"DNS是一个网络服务器，DNS存在着多级缓存，从离浏览器的距离排序的话，有以下几种: 浏览器缓存，系统缓存，路由器缓存，IPS服务器缓存，根域名服务器缓存，顶级域名服务器缓存，主域名服务器缓存。")],-1),zn=(0,t.Wm)("ol",{start:"2"},[(0,t.Wm)("li",null,"TCP 连接：TCP 三次握手"),(0,t.Wm)("li",null,"向这个 IP 的机器发送 HTTP 请求"),(0,t.Wm)("li",null,"服务器收到、处理并返回 HTTP 请求"),(0,t.Wm)("li",null,"浏览器解析渲染页面"),(0,t.Wm)("li",null,"断开连接：TCP 四次挥手")],-1),Jn=(0,t.Wm)("h4",{id:"页面渲染过程",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#页面渲染过程","aria-hidden":"true"},"#"),(0,t.Uk)(" 页面渲染过程")],-1),Bn=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"处理 HTML(HTML Parser) 标记并构建 DOM 树。"),(0,t.Wm)("li",null,"处理 CSS 标记并构建 CSSOM 树。"),(0,t.Wm)("li",null,"将 DOM 与 CSSOM 合并成一个渲染树。"),(0,t.Wm)("li",null,"Layout根据渲染树来布局，以计算每个节点的几何信息。"),(0,t.Wm)("li",null,"将各个节点绘制到屏幕上。")],-1),Gn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"CSS")],-1),Yn=(0,t.Wm)("p",null,"link 标签（无论是否 inline）会被视为阻塞渲染的资源，浏览器会优先处理这些 CSS 资源，直至 CSSOM 构建完毕。",-1),Vn=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"JavaScript")],-1),Qn=(0,t.Wm)("p",null,[(0,t.Wm)("code",null,"script"),(0,t.Uk)(" 标签会阻塞 "),(0,t.Wm)("code",null,"HTML"),(0,t.Uk)(" 解析 改变阻塞模式："),(0,t.Wm)("code",null,"defer"),(0,t.Uk)(" 与 "),(0,t.Wm)("code",null,"async")],-1),Kn=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"`defer` 和 `async` 的区别在于"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"defer"),(0,t.Uk)(" HTML 结构完全生成，以及其他脚本执行完成，在window.onload 之前执行。")]),(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"async"),(0,t.Uk)(" 一旦下载完，渲染引擎就会中断渲染，执行这个脚本以后，再继续渲染。")]),(0,t.Wm)("li",null,[(0,t.Uk)("如果有多个 "),(0,t.Wm)("code",null,"defer"),(0,t.Uk)(" 脚本，会按照它们在页面出现的顺序加载")]),(0,t.Wm)("li",null,[(0,t.Uk)("多个 "),(0,t.Wm)("code",null,"async"),(0,t.Uk)(" 脚本不能保证加载顺序")])])],-1),$n=(0,t.Wm)("h3",{id:"回流-reflow-重排-与重绘-repaint",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#回流-reflow-重排-与重绘-repaint","aria-hidden":"true"},"#"),(0,t.Uk)(" 回流（Reflow/重排）与重绘（Repaint）")],-1),ns=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("当"),(0,t.Wm)("code",null,"render tree"),(0,t.Uk)("(渲染树)中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。这就称为回流(reflow)。每个页面至少需要一次回流，就是在页面第一次加载的时候。在回流的时候，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树，完成回流后，浏览器会重新绘制受影响的部分到屏幕中，该过程成为重绘。")]),(0,t.Wm)("li",null,[(0,t.Uk)("当"),(0,t.Wm)("code",null,"render tree"),(0,t.Uk)("中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color。则就叫称为重绘。")])])],-1),ss=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"注意：回流必将引起重绘，而重绘不一定会引起回流。")],-1),as=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"当页面布局和几何属性改变时就需要回流。下述情况会发生浏览器回流：")],-1),ts=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,"添加或者删除可见的DOM元素；"),(0,t.Wm)("li",null,"元素位置改变；"),(0,t.Wm)("li",null,"元素尺寸改变——边距、填充、边框、宽度和高度、改变盒模型"),(0,t.Wm)("li",null,"内容改变——比如文本改变或者图片大小改变而引起的计算值宽度和高度改变；"),(0,t.Wm)("li",null,"页面渲染初始化；"),(0,t.Wm)("li",null,"浏览器窗口尺寸改变——resize事件发生时；")],-1),os=(0,t.Wm)("h4",{id:"重绘和回流其实也和-eventloop-有关-衍生react-fiber",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#重绘和回流其实也和-eventloop-有关-衍生react-fiber","aria-hidden":"true"},"#"),(0,t.Uk)(" 重绘和回流其实也和 Eventloop 有关（衍生React Fiber）")],-1),es=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("当 Eventloop 执行完 Microtasks 后，会判断"),(0,t.Wm)("code",null,"document"),(0,t.Uk)("是否需要更新，因为浏览器是 60Hz 的刷新率，每 16.6ms 才会更新一次。")]),(0,t.Wm)("li",null,[(0,t.Uk)("然后判断是否有"),(0,t.Wm)("code",null,"resize"),(0,t.Uk)("或者"),(0,t.Wm)("code",null,"scroll"),(0,t.Uk)("事件，有的话会去触发事件，所以"),(0,t.Wm)("code",null,"resize"),(0,t.Uk)("和"),(0,t.Wm)("code",null,"scroll"),(0,t.Uk)("事件也是至少 16ms 才会触发一次，并且自带节流功能。")]),(0,t.Wm)("li",null,"判断是否触发了 media query"),(0,t.Wm)("li",null,"更新动画并且发送事件"),(0,t.Wm)("li",null,"判断是否有全屏操作事件"),(0,t.Wm)("li",null,[(0,t.Uk)("执行"),(0,t.Wm)("code",null,"requestAnimationFrame"),(0,t.Uk)("回调")]),(0,t.Wm)("li",null,[(0,t.Uk)("执行"),(0,t.Wm)("code",null,"IntersectionObserver"),(0,t.Uk)("回调，该方法用于判断元素是否可见，可以用于懒加载上，但是兼容性不好")]),(0,t.Wm)("li",null,"更新界面"),(0,t.Wm)("li",null,[(0,t.Uk)("以上就是一帧中可能会做的事情。如果在一帧中有空闲时间，就会去执行"),(0,t.Wm)("code",null,"requestIdleCallback"),(0,t.Uk)("回调")])],-1),cs=(0,t.Wm)("h4",{id:"减少重绘和回流",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#减少重绘和回流","aria-hidden":"true"},"#"),(0,t.Uk)(" 减少重绘和回流")],-1),ls=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("使用"),(0,t.Wm)("code",null,"transform"),(0,t.Uk)("替代"),(0,t.Wm)("code",null,"top")]),(0,t.Wm)("li",null,[(0,t.Uk)("使用"),(0,t.Wm)("code",null,"visibility"),(0,t.Uk)("替换"),(0,t.Wm)("code",null,"display: none"),(0,t.Uk)("，因为前者只会引起重绘，后者会引发回流（改变了布局）")]),(0,t.Wm)("li",null,"不要把节点的属性值放在一个循环里当成循环里的变量 for(let i = 0; i < 1000; i++) { // 获取 offsetTop 会导致回流，因为需要去获取正确的值 console.log(document.querySelector('.test').style.offsetTop) }"),(0,t.Wm)("li",null,[(0,t.Uk)("不要使用"),(0,t.Wm)("code",null,"table"),(0,t.Uk)("布局，可能很小的一个小改动会造成整个"),(0,t.Wm)("code",null,"table"),(0,t.Uk)("的重新布局")]),(0,t.Wm)("li",null,[(0,t.Uk)("动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用"),(0,t.Wm)("code",null,"requestAnimationFrame")]),(0,t.Wm)("li",null,[(0,t.Uk)("将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点。比如对于"),(0,t.Wm)("code",null,"video"),(0,t.Uk)("标签来说，浏览器会自动将该节点变为图层。")]),(0,t.Wm)("li",null,"var fragment = document.createDocumentFragment();")],-1),ps=(0,t.Wm)("h2",{id:"安全防范面试题",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#安全防范面试题","aria-hidden":"true"},"#"),(0,t.Uk)(" 安全防范面试题")],-1),ms=(0,t.Wm)("h3",{id:"xss跨域脚本攻击",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#xss跨域脚本攻击","aria-hidden":"true"},"#"),(0,t.Uk)(" XSS跨域脚本攻击")],-1),ks=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"XSS攻击简单来说就是攻击者想尽一切办法把可执行的代码嵌入到页面中，可以窃取 Cookie 信息、监听用户行为（键盘事件输入密码）、修改DOM模拟登入框、插入悬浮广告，以达到非法窃取某些数据或者破坏的目的。")],-1),us=(0,t.Wm)("p",null,"网络劫持在页面传输过程中修改 HTML 页面的内容，这种劫持类型很多，有通过 WiFi 路由器劫持,运营商劫持",-1),Ws=(0,t.Wm)("p",null,[(0,t.Wm)("strong",null,"依据情景的不同，XSS攻击可分为两种类型")],-1),is=(0,t.Wm)("h4",{id:"反射性xss",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#反射性xss","aria-hidden":"true"},"#"),(0,t.Uk)(" 反射性XSS")],-1),rs=(0,t.Wm)("p",null,"用户将一段含有恶意代码的请求提交给 Web 服务器，Web 服务器接收到请求时，又将恶意代码反射给了浏览器端(不存储)，一个反射性XSS可能如下所示",-1),ds=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 搜索地址栏取参数"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// http://localhost:3000/?xss=<script>alert('你被xss攻击了')<\/script>"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"/* GET home page. */"),(0,t.Uk)("\nrouter"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"get"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'/'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},[(0,t.Uk)("req"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" res"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(" next")]),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  res"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"render"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'index'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" title"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'Express'"),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Uk)("xss"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)("req"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("query"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("xss "),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"%"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)(" xss "),(0,t.Wm)("span",{class:"token operator"},"%"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("div"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n")])])],-1),Us=(0,t.Wm)("h4",{id:"存储型xss",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#存储型xss","aria-hidden":"true"},"#"),(0,t.Uk)(" 存储型XSS")],-1),gs=(0,t.Wm)("p",null,"用户将一段含有恶意代码的请求提交给 Web 服务器，Web 服务器接收到请求时，又将恶意代码反射给了浏览器端(不存储",-1),hs=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:k.Z,alt:"储存性XSS攻击"})],-1),fs=(0,t.Wm)("h4",{id:"xss防御",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#xss防御","aria-hidden":"true"},"#"),(0,t.Uk)(" XSS防御")],-1),vs=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("将由用户输入的内容，进行必要的标签转义，包括"),(0,t.Wm)("code",null,"<"),(0,t.Uk)("、"),(0,t.Wm)("code",null,">"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"/"),(0,t.Uk)("等,"),(0,t.Wm)("code",null,"React.dangerouslySetInnerHTML")]),(0,t.Wm)("li",null,[(0,t.Uk)("再服务端设置"),(0,t.Wm)("code",null,"cookie"),(0,t.Uk)("属性"),(0,t.Wm)("code",null,"httpOnly"),(0,t.Uk)("防止客户端通过"),(0,t.Wm)("code",null,"document.cookie"),(0,t.Uk)("读取")]),(0,t.Wm)("li",null,[(0,t.Uk)("过滤一些危险属性或者方法，例如"),(0,t.Wm)("code",null,"onerror"),(0,t.Uk)("方法、"),(0,t.Wm)("code",null,"href"),(0,t.Uk)("属性、"),(0,t.Wm)("code",null,"src"),(0,t.Uk)("属性等")]),(0,t.Wm)("li",null,"充分利用 CSP")])],-1),bs=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Uk)("React"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("dangerouslySetInnerHTML\n"),(0,t.Wm)("span",{class:"token keyword"},"var"),(0,t.Uk)(" txt"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Wm)("span",{class:"token string"},"\"<script>alert('1')<\/script>\""),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\ntxt"),(0,t.Wm)("span",{class:"token operator"},"="),(0,t.Uk)("txt"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"replace"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token regex"},[(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-source language-regex"},"<script|<\\/script"),(0,t.Wm)("span",{class:"token regex-delimiter"},"/"),(0,t.Wm)("span",{class:"token regex-flags"},"ig")]),(0,t.Wm)("span",{class:"token punctuation"},","),(0,t.Wm)("span",{class:"token keyword"},"function"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token parameter"},"c"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},'"&lt;"'),(0,t.Wm)("span",{class:"token operator"},"+"),(0,t.Uk)("c"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Wm)("span",{class:"token function"},"substring"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token number"},"1"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token punctuation"},"}"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("\ncode"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Wm)("span",{class:"token function"},"alert"),(0,t.Wm)("span",{class:"token punctuation"},"("),(0,t.Wm)("span",{class:"token string"},"'你被xss攻击了'"),(0,t.Wm)("span",{class:"token punctuation"},")"),(0,t.Wm)("span",{class:"token operator"},"<"),(0,t.Wm)("span",{class:"token operator"},"/"),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token operator"},">"),(0,t.Uk)("\n\n"),(0,t.Wm)("span",{class:"token comment"},"// 很多 XSS 攻击都是来盗用 Cookie 的，因此还可以通过使用 HttpOnly 属性来保护我们 Cookie 的安全。"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// HTTP 响应头来设置"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token template-string"},[(0,t.Wm)("span",{class:"token template-punctuation string"},"`"),(0,t.Wm)("span",{class:"token string"},"set-cookie: NID=189=M8q2FtWbsR8RlcldPVt7qkrqR38LmFY9jUxkKo3-4Bi6Qu_ocNOat7nkYZUTzolHjFnwBw0izgsATSI7TZyiiiaV94qGh-BzEYsNVa7TZmjAYTxYTOM9L_-0CN9ipL6cXi8l6-z41asXtm2uEwcOC5oh9djkffOMhWqQrlnCtOI; expires=Sat, 18-Apr-2020 06:52:22 GMT; path=/; domain=.google.com; HttpOnly"),(0,t.Wm)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n")])])],-1),xs=(0,t.Wm)("h3",{id:"csp内容安全策略",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#csp内容安全策略","aria-hidden":"true"},"#"),(0,t.Uk)(" CSP内容安全策略")],-1),ws=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"CSP内容安全策略本质上来说是建立白名单机制，告诉浏览器哪些外部资源可以加载和执行，我们只需要配置，拦截主要交给浏览器。")],-1),Ss=(0,t.Wm)("p",null,"通常有两种方法设置CSP：",-1),ys=(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Uk)("通过设置"),(0,t.Wm)("code",null,"HTTP Header"),(0,t.Uk)("的"),(0,t.Wm)("code",null,"Content-Security-Policy")]),(0,t.Wm)("li",null,[(0,t.Uk)("通过"),(0,t.Wm)("code",null,"meta"),(0,t.Uk)("标签来设置，例如："),(0,t.Wm)("code",null,'<meta http-equiv="Content-Security-Policy">')])],-1),Ts=(0,t.Wm)("div",{class:"language-javascript ext-js"},[(0,t.Wm)("pre",{class:"language-javascript"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token comment"},"// 1、限制加载其他域下的资源文件，这样即使黑客插入了一个 JavaScript 文件，这个 JavaScript 文件也是无法被加载的；"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 2、禁止向第三方域提交数据，这样用户数据也不会外泄；"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 3、禁止执行内联脚本和未授权的脚本；"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token comment"},"// 4、还提供了上报机制，这样可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题。"),(0,t.Uk)("\nContent"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("Security"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("Policy"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token keyword"},"default"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)(" blob"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("script"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src "),(0,t.Wm)("span",{class:"token string"},"'self'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("netease"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".127"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("net "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".126"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("net "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".163"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("w3t"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("cn "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("googletagmanager"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("google"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("analytics"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("googleadservices"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("google"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com res"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("wx"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("qq"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token number"},"127.0"),(0,t.Wm)("span",{class:"token number"},".0"),(0,t.Wm)("span",{class:"token number"},".1"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'unsafe-inline'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'unsafe-eval'"),(0,t.Uk)(" blob"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("style"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token string"},"'unsafe-inline'"),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token punctuation"},";"),(0,t.Uk)("img"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src "),(0,t.Wm)("span",{class:"token string"},"'self'"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("netease"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".127"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("net "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".126"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("net "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token number"},".163"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("doubleclick"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("net "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("googletagmanager"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("google"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("analytics"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("googleadservices"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("google"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com res"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("wx"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("qq"),(0,t.Wm)("span",{class:"token punctuation"},"."),(0,t.Uk)("com "),(0,t.Wm)("span",{class:"token number"},"127.0"),(0,t.Wm)("span",{class:"token number"},".0"),(0,t.Wm)("span",{class:"token number"},".1"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)(" data"),(0,t.Wm)("span",{class:"token operator"},":"),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)("   script"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src： 只允许加载网易域内的内容以及统计，微信等的js。\n"),(0,t.Wm)("span",{class:"token operator"},"*"),(0,t.Uk)("   img"),(0,t.Wm)("span",{class:"token operator"},"-"),(0,t.Uk)("src： 只允许加载网易域内，或者统计服务域的内容（比如google统计服务通过获取图片的方式上传数据）\n")])])],-1),Cs=(0,t.Wm)("h3",{id:"csrf跨域请求伪造",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#csrf跨域请求伪造","aria-hidden":"true"},"#"),(0,t.Uk)(" CSRF跨域请求伪造")],-1),Ps=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("CSRF攻击原理上是攻击者伪造一个后端请求地址，诱导用户进行点击，如果用户在"),(0,t.Wm)("strong",null,"已登录"),(0,t.Uk)("的情况,并在本地生成Cookike,下点击了这个危险链接，则后端服务器会认为是用户在正常访问，攻击者从而可以从请求中拿到一些信息，进而进行攻击。")])],-1),js=(0,t.Wm)("div",{class:"language-html ext-html"},[(0,t.Wm)("pre",{class:"language-html"},[(0,t.Wm)("code",null,[(0,t.Wm)("span",{class:"token doctype"},[(0,t.Wm)("span",{class:"token punctuation"},"<!"),(0,t.Wm)("span",{class:"token doctype-tag"},"DOCTYPE"),(0,t.Uk)(),(0,t.Wm)("span",{class:"token name"},"html"),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("html")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("body")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("h1")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("黑客的站点：图片地址伪装get请求"),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"</"),(0,t.Uk)("h1")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"<"),(0,t.Uk)("img")]),(0,t.Uk)(),(0,t.Wm)("span",{class:"token attr-name"},"src"),(0,t.Wm)("span",{class:"token attr-value"},[(0,t.Wm)("span",{class:"token punctuation attr-equals"},"="),(0,t.Wm)("span",{class:"token punctuation"},'"'),(0,t.Uk)("https://time.geekbang.org/sendcoin?user=hacker&number=100"),(0,t.Wm)("span",{class:"token punctuation"},'"')]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n  "),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"</"),(0,t.Uk)("body")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token tag"},[(0,t.Wm)("span",{class:"token punctuation"},"</"),(0,t.Uk)("html")]),(0,t.Wm)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n// 在不登出A的情况下，访问危险网站B（其实是利用了网站A的漏洞，温馨提示一下，cookie保证了用户可以处于登录状态，但网站B其实拿不到 cookie。 （新浪微博关注get请求，利用这个漏洞点击连接批量关注）\n")])])],-1),Ms=(0,t.Wm)("h4",{id:"csrf防御",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#csrf防御","aria-hidden":"true"},"#"),(0,t.Uk)(" CSRF防御")],-1),Os=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"CSRF防御有如下几种方式："),(0,t.Wm)("ol",null,[(0,t.Wm)("li",null,[(0,t.Wm)("code",null,"Get"),(0,t.Uk)("请求不对数据进行修改")]),(0,t.Wm)("li",null,[(0,t.Uk)("不让第三方网站访问用户的"),(0,t.Wm)("code",null,"Cookie"),(0,t.Uk)("，可以通过"),(0,t.Wm)("code",null,"Cookie"),(0,t.Uk)("的"),(0,t.Wm)("code",null,"SameSite"),(0,t.Uk)("属性")]),(0,t.Wm)("li",null,"阻止第三方网站请求"),(0,t.Wm)("li",null,[(0,t.Uk)("在进行请求时，附加"),(0,t.Wm)("code",null,"refer"),(0,t.Uk)("验证和"),(0,t.Wm)("code",null,"token"),(0,t.Uk)("验证(Token用的最多，自定义Token在请求头,避免模拟get请求直接携带cookie)")])]),(0,t.Wm)("p",null,"通过 Referer 告诉服务器 HTTP 请求的来源。 Origin 属性只包含了域名信息，并没有包含具体的 URL 路径")],-1),Is=(0,t.Wm)("h3",{id:"点击劫持",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#点击劫持","aria-hidden":"true"},"#"),(0,t.Uk)(" 点击劫持")],-1),Ls=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,"点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。")],-1),Es=(0,t.Wm)("h4",{id:"防御手段",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#防御手段","aria-hidden":"true"},"#"),(0,t.Uk)(" 防御手段")],-1),Ds=(0,t.Wm)("p",null,[(0,t.Uk)("设置HTTP响应头"),(0,t.Wm)("code",null,"X-FRAME-OPTIONS"),(0,t.Uk)("，它可以设置"),(0,t.Wm)("code",null,"DENY"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"SAMEORIGIN"),(0,t.Uk)("、"),(0,t.Wm)("code",null,"ALLOW-FROM"),(0,t.Uk)("分别表示不允许"),(0,t.Wm)("code",null,"iframe"),(0,t.Uk)("展示、只允许永远"),(0,t.Wm)("code",null,"iframe"),(0,t.Uk)("展示、表示页面可以在指定来源的"),(0,t.Wm)("code",null,"iframe"),(0,t.Uk)("中展示。")],-1),Rs=(0,t.Wm)("h3",{id:"中间人攻击",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#中间人攻击","aria-hidden":"true"},"#"),(0,t.Uk)(" 中间人攻击")],-1),Hs=(0,t.Wm)("div",{class:"custom-container tip"},[(0,t.Wm)("p",{class:"custom-container-title"},"TIP"),(0,t.Wm)("p",null,[(0,t.Uk)("中间人攻击是攻击方同时与服务端和客户端建立起了连接，并让对方认为连接是安全的，但是实际上整个通信过程都被攻击者控制了。攻击者不仅能获得双方的通信信息，还能修改通信信息。一般来说使用"),(0,t.Wm)("code",null,"HTTPS"),(0,t.Uk)("协议可以有效防止中间人攻击，但并不是说"),(0,t.Wm)("code",null,"HTTPS"),(0,t.Uk)("就可以高枕无忧，因为攻击者可以通过某种方式从"),(0,t.Wm)("code",null,"HTTPS"),(0,t.Uk)("降级到"),(0,t.Wm)("code",null,"HTTP"),(0,t.Uk)("进行访问。")])],-1),qs=(0,t.Wm)("p",null,[(0,t.Wm)("img",{src:u.Z,alt:"中间人攻击"})],-1),Ns={render:function(n,s){return(0,t.wg)(),(0,t.j4)(t.HY,null,[W,i,r,d,U,g,h,f,v,b,x,w,S,y,T,C,P,j,M,O,I,L,E,D,R,H,q,N,A,F,X,Z,_,z,J,B,G,Y,V,Q,K,$,nn,sn,an,tn,on,en,cn,ln,pn,mn,kn,un,Wn,rn,dn,Un,gn,hn,fn,vn,bn,xn,wn,Sn,yn,Tn,Cn,Pn,jn,Mn,On,In,Ln,En,Dn,Rn,Hn,qn,Nn,An,Fn,Xn,Zn,_n,zn,Jn,Bn,Gn,Yn,Vn,Qn,Kn,$n,ns,ss,as,ts,os,es,cs,ls,ps,ms,ks,us,Ws,is,rs,ds,Us,gs,hs,fs,vs,bs,xs,ws,Ss,ys,Ts,Cs,Ps,js,Ms,Os,Is,Ls,Es,Ds,Rs,Hs,qs],64)}}}}]);