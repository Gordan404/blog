<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="icon" href="https://gordan404.github.io/blog/favicon.ico"><title>前端面试指北 | 知识库</title><meta name="description" content="知识库强，则技术强，技术强则国强"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="preload" href="/blog/assets/js/runtime~app.f8d400ef.js" as="script"><link rel="preload" href="/blog/assets/css/styles.ef0a818f.css" as="style"><link rel="preload" href="/blog/assets/js/9177.76fd6710.js" as="script"><link rel="preload" href="/blog/assets/js/app.0fe64d3a.js" as="script">
    <link rel="stylesheet" href="/blog/assets/css/styles.ef0a818f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/blog/" class=""><img class="logo" src="/blog/logoH.png" alt="知识库"><span class="site-name can-hide">知识库</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端面试指北"><span class="title">前端面试指北</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端面试指北"><span class="title">前端面试指北</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/interview/README.md" class="nav-link" aria-label="JavaScript基础知识"><!--[--><!--]--> JavaScript基础知识 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/h5.md" class="nav-link" aria-label="HTML和CSS相关"><!--[--><!--]--> HTML和CSS相关 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/browser.md" class="nav-link" aria-label="浏览器和网络知识点及常考"><!--[--><!--]--> 浏览器和网络知识点及常考 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/vue.md" class="nav-link" aria-label="VUE知识点及常考"><!--[--><!--]--> VUE知识点及常考 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/javascript.md" class="nav-link" aria-label="JavaScript基础知识"><!--[--><!--]--> JavaScript基础知识 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端书籍"><span class="title">前端书籍</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端书籍"><span class="title">前端书籍</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>JavaScript书籍</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/blog/books/javascript/know-up.md" class="nav-link" aria-label="你不知道的JavaScript(上)"><!--[--><!--]--> 你不知道的JavaScript(上) <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/know-down.md" class="nav-link" aria-label="你不知道的JavaScript(中下)"><!--[--><!--]--> 你不知道的JavaScript(中下) <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/red-book.md" class="nav-link" aria-label="JavaScript高级程序设计"><!--[--><!--]--> JavaScript高级程序设计 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/algorithm.md" class="nav-link" aria-label="JavaScript数据结构和算法"><!--[--><!--]--> JavaScript数据结构和算法 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/designPattern/" class="nav-link" aria-label="JavaScript设计模式与开发实践"><!--[--><!--]--> JavaScript设计模式与开发实践 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/es6.md" class="nav-link" aria-label="深入理解ES6"><!--[--><!--]--> 深入理解ES6 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Git书籍</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/blog/books/git/" class="nav-link" aria-label="精通Git"><!--[--><!--]--> 精通Git <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/blog/vueAnalysis/introduction/" class="nav-link" aria-label="Vue源码分析"><!--[--><!--]--> Vue源码分析 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="自动化测试"><span class="title">自动化测试</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="自动化测试"><span class="title">自动化测试</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/test/vueTest.md" class="nav-link" aria-label="Vue应用测试"><!--[--><!--]--> Vue应用测试 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="打包工具"><span class="title">打包工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="打包工具"><span class="title">打包工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/webpack/webpack/" class="nav-link" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/rollup" class="nav-link" aria-label="Rollup"><!--[--><!--]--> Rollup <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/typescript/" class="nav-link" aria-label="TypeScript基础"><!--[--><!--]--> TypeScript基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/typescript/challenge.md" class="nav-link" aria-label="TypeScript类型挑战"><!--[--><!--]--> TypeScript类型挑战 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Gordan404/blog" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端面试指北"><span class="title">前端面试指北</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端面试指北"><span class="title">前端面试指北</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/interview/README.md" class="nav-link" aria-label="JavaScript基础知识"><!--[--><!--]--> JavaScript基础知识 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/h5.md" class="nav-link" aria-label="HTML和CSS相关"><!--[--><!--]--> HTML和CSS相关 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/browser.md" class="nav-link" aria-label="浏览器和网络知识点及常考"><!--[--><!--]--> 浏览器和网络知识点及常考 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/vue.md" class="nav-link" aria-label="VUE知识点及常考"><!--[--><!--]--> VUE知识点及常考 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/interview/javascript.md" class="nav-link" aria-label="JavaScript基础知识"><!--[--><!--]--> JavaScript基础知识 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端书籍"><span class="title">前端书籍</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端书籍"><span class="title">前端书籍</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>JavaScript书籍</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/blog/books/javascript/know-up.md" class="nav-link" aria-label="你不知道的JavaScript(上)"><!--[--><!--]--> 你不知道的JavaScript(上) <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/know-down.md" class="nav-link" aria-label="你不知道的JavaScript(中下)"><!--[--><!--]--> 你不知道的JavaScript(中下) <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/red-book.md" class="nav-link" aria-label="JavaScript高级程序设计"><!--[--><!--]--> JavaScript高级程序设计 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/algorithm.md" class="nav-link" aria-label="JavaScript数据结构和算法"><!--[--><!--]--> JavaScript数据结构和算法 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/designPattern/" class="nav-link" aria-label="JavaScript设计模式与开发实践"><!--[--><!--]--> JavaScript设计模式与开发实践 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/es6.md" class="nav-link" aria-label="深入理解ES6"><!--[--><!--]--> 深入理解ES6 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Git书籍</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/blog/books/git/" class="nav-link" aria-label="精通Git"><!--[--><!--]--> 精通Git <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/blog/vueAnalysis/introduction/" class="nav-link" aria-label="Vue源码分析"><!--[--><!--]--> Vue源码分析 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="自动化测试"><span class="title">自动化测试</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="自动化测试"><span class="title">自动化测试</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/test/vueTest.md" class="nav-link" aria-label="Vue应用测试"><!--[--><!--]--> Vue应用测试 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="打包工具"><span class="title">打包工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="打包工具"><span class="title">打包工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/webpack/webpack/" class="nav-link" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/rollup" class="nav-link" aria-label="Rollup"><!--[--><!--]--> Rollup <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/typescript/" class="nav-link" aria-label="TypeScript基础"><!--[--><!--]--> TypeScript基础 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/typescript/challenge.md" class="nav-link" aria-label="TypeScript类型挑战"><!--[--><!--]--> TypeScript类型挑战 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Gordan404/blog" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">前端面试指北</p><ul class=""><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#vue相关面试题" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="VUE相关面试题"><!--[--><!--]--> VUE相关面试题 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#为什么-data-是一个函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="为什么 data 是一个函数"><!--[--><!--]--> 为什么 data 是一个函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#组件中写name选项有什么作用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="组件中写name选项有什么作用"><!--[--><!--]--> 组件中写name选项有什么作用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#v-if-和-v-show-的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-if 和 v-show 的区别"><!--[--><!--]--> v-if 和 v-show 的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#computed和watch的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="computed和watch的区别"><!--[--><!--]--> computed和watch的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#v-if-与-v-for-为什么不建议一起使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-if 与 v-for 为什么不建议一起使用"><!--[--><!--]--> v-if 与 v-for 为什么不建议一起使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#v-for-为什么要加-key" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="v-for 为什么要加 key"><!--[--><!--]--> v-for 为什么要加 key <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#vue组件通信" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Vue组件通信"><!--[--><!--]--> Vue组件通信 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#组件生命周期" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="组件生命周期"><!--[--><!--]--> 组件生命周期 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#父子组件的渲染顺序" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="父子组件的渲染顺序"><!--[--><!--]--> 父子组件的渲染顺序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#keep-alive-使用场景和原理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="keep-alive 使用场景和原理"><!--[--><!--]--> keep-alive 使用场景和原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#nexttick-原理和使用场景" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="$nextTick 原理和使用场景"><!--[--><!--]--> $nextTick 原理和使用场景 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/interview/vue.html#vue-mixin-的使用场景和原理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Vue.mixin 的使用场景和原理"><!--[--><!--]--> Vue.mixin 的使用场景和原理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="前端面试指北" tabindex="-1"><a class="header-anchor" href="#前端面试指北" aria-hidden="true">#</a> 前端面试指北</h1><h2 id="vue相关面试题" tabindex="-1"><a class="header-anchor" href="#vue相关面试题" aria-hidden="true">#</a> VUE相关面试题</h2><p>强烈建议阅读<a href="/vueAnalysis/introduction/" target="_blank" rel="noopener noreferrer">Vue源码分析<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h3 id="为什么-data-是一个函数" tabindex="-1"><a class="header-anchor" href="#为什么-data-是一个函数" aria-hidden="true">#</a> 为什么 data 是一个函数</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>组件中的 data 写成一个函数，数据以函数返回值形式定义，这样每复用一次组件，就会返回一份新的对象的独立拷贝data，类似于给每个组件实例创建一个私有的数据空间，让各个组件实例维护各自的数据。而单纯的写成对象形式，就使得所有组件实例共用了一份 data，就会造成一个变了全都会变的结果，跟JS的引用类型相关，而非Vue.</p></div><h3 id="组件中写name选项有什么作用" tabindex="-1"><a class="header-anchor" href="#组件中写name选项有什么作用" aria-hidden="true">#</a> 组件中写name选项有什么作用</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>1、组件keep-alive缓存用name搭配exclude过滤 2、组件递归调用 3、组件安装 4、vue-devtools调试工具name 对应组件名称</p></div><h3 id="v-if-和-v-show-的区别" tabindex="-1"><a class="header-anchor" href="#v-if-和-v-show-的区别" aria-hidden="true">#</a> v-if 和 v-show 的区别</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>v-if 在编译过程中会被转化成三元表达式,条件不满足时不渲染此节点。</p><p>v-show 会被编译成指令，条件不满足时控制样式将对应节点隐藏 （display:none）</p></div><h3 id="computed和watch的区别" tabindex="-1"><a class="header-anchor" href="#computed和watch的区别" aria-hidden="true">#</a> computed和watch的区别</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><ol><li><code>computed</code> 是计算属性，依赖其他属性计算值，并且 <code>computed</code> 的值有缓存(data里不变还是不会重新计算的)，只有当计算值变化才会返回内容，它可以设置 <code>getter</code> 和 <code>setter</code>。</li><li>从使用场景上说，<code>computed</code>适用一个数据被多个数据影响，而<code>watch</code>适用一个数据影响多个数据；</li><li><code>computed</code> 是在<code>Dep.update()</code>，执行之后，数据更新之前,watch 是在set刚开始的时候添加回调用，可以监听数据变化情况</li><li><code>watch</code>监听引用类型需要设置<code>deep:true</code></li></ol></div><p><strong>运用场景：</strong></p><ul><li>当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算；</li><li>当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作 ( 访问一个 API )，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 先来看看computed最最核心的代码， 脏检查, 执行计算</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>watcher<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    watcher<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 <span class="token comment">// Dep更新依赖</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    watcher<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#39;狗蛋&#39;</span>
    <span class="token punctuation">}</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
      info<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;调用了getter属性&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;牛逼&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;调用了settter属性&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;狗蛋Plus&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 第一次访问 `this.name` 的时候, 会调用相应的 get(),记录了依赖项 `name`</span>
<span class="token number">1</span>、在 computed 初始化的过程中会创建一个 watcher 并设置lazy<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">,</span>所以在初始化时会求值，在页面中调用 computed 时，开始求值，调用 watcher<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法<span class="token punctuation">,</span>并将 dirty<span class="token operator">=</span><span class="token boolean">false</span>。
<span class="token number">2</span>、当 computed依赖的属性发生改变时，会调用 watcher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，将dirty<span class="token operator">=</span><span class="token boolean">true</span>。
<span class="token number">3</span>、当在页面中再次获取该属性时，会再次调用 如果dirty为 truewatcher<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，否则返回原来计算的值。这就是computed 为什么具有缓存效果的原因。
</code></pre></div><h3 id="v-if-与-v-for-为什么不建议一起使用" tabindex="-1"><a class="header-anchor" href="#v-if-与-v-for-为什么不建议一起使用" aria-hidden="true">#</a> v-if 与 v-for 为什么不建议一起使用</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>v-for 和 v-if 不要在同一个标签中使用,因为解析时先解析 v-for 优先级高于 v-if,这意味着 v-if 将分别重复运行于每个 v-for 循环中。如果遇到需要同时使用时可以考虑写成计算属性的方式。</p></div><h3 id="v-for-为什么要加-key" tabindex="-1"><a class="header-anchor" href="#v-for-为什么要加-key" aria-hidden="true">#</a> v-for 为什么要加 key</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>key 是为 Vue 中 vnode 的唯一标记，当diff oldCh 和 newCh 四种比较方式没有匹配到，如果设置了key就会用key比较，如果不使用 key，Vue 会使用一种最大限度减少动态元素并且尽可能的尝试就地修改/复用相同类型元素的算法。通过这个 key，我们的 diff 操作可以更准确、更快速 更准确：因为带 key 就不是原地复用了，在 sameNode 函数 a.key === b.key 对比中可以避免就地复用的情况。所以会更加准确。 更快速：利用 key 的唯一性生成 map 对象来获取对应节点，比遍历方式更快</p></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createKeyToOldIdx</span> <span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> beginIdx<span class="token punctuation">,</span> endIdx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i<span class="token punctuation">,</span> key
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> beginIdx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> endIdx<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> map
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue组件通信" tabindex="-1"><a class="header-anchor" href="#vue组件通信" aria-hidden="true">#</a> Vue组件通信</h3><ul><li>父子组件通信</li><li>兄弟组件通信</li><li>跨多层级组件通信</li><li>任意组件</li></ul><h4 id="父子通信" tabindex="-1"><a class="header-anchor" href="#父子通信" aria-hidden="true">#</a> 父子通信</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><ol><li>父组件通过 <code>props</code> 传递数据给子组件，子组件通过 <code>emit</code> 发送事件传递数据给父组件</li><li>父组件<code>v-model</code>(语法糖),子组件派发<code>this.$emit(&#39;input&#39;, 1)</code></li><li>通过访问 <code>$parent</code> 或者 <code>$children</code> 对象来访问组件实例中的方法和数据</li><li>Vue 2.3 及以上版本的话还可以使用 <code>$listeners</code>、<code>$attrs</code> 和 <code>.sync</code> 属性</li></ol></div><ul><li>$attrs：当前组件的属性，通俗的讲也就是在组件标签定义的一系列属性，如input的value，placeholder等，但是不包括在当前组件里面定义的props属性</li><li>$listeners：当前组件监听的事件，通俗的讲也就是在使用组件的时候在标签中定义的事件，如@input，以及一些自定义事件</li><li>当前组件中使用<code>v-bind=&quot;$attrs&quot;</code>、<code>v-bind=&quot;$props&quot;</code>,<code>v-on=&quot;$listeners&quot;</code>也就是把之前父组件那里给它的属性再全部传到它的子组件</li><li>多级组件传多个值时，调用目标组件绑定$attrs，可直接获取根组件所传递参数，而不用每一级组件逐层传递。例如：组件二次封装，想保留之前属性方法，并且扩展新属性方法。</li></ul><div class="language-text ext-text"><pre class="language-text"><code>&lt;!--父组件中--&gt;
&lt;input :value.sync=&quot;value&quot; /&gt;
&lt;!--以上写法等同于--&gt;
&lt;input :value=&quot;value&quot; @update:value=&quot;v =&gt; value = v&quot;&gt;&lt;/comp&gt;
&lt;!--子组件中--&gt;
&lt;script&gt;
  this.$emit(&#39;update:value&#39;, 1)
&lt;/script&gt;
</code></pre></div><h4 id="兄弟组件通信" tabindex="-1"><a class="header-anchor" href="#兄弟组件通信" aria-hidden="true">#</a> 兄弟组件通信</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>对于这种情况可以通过查找父组件中的子组件实现，也就是 <code>this.$parent.$children</code>，在 <code>$children</code> 中可以通过组件 name 查询到需要的组件实例，然后进行通信。</p></div><h4 id="跨多层次组件通信" tabindex="-1"><a class="header-anchor" href="#跨多层次组件通信" aria-hidden="true">#</a> 跨多层次组件通信</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>provide / inject，虽然文档中不推荐直接使用在业务中，但是如果用得好的话还是很有用的。 假设有父组件 A，然后有一个跨多层级的子组件 B,element表单中有使用(disabled)</p></div><div class="language-text ext-text"><pre class="language-text"><code>// 父组件 A
export default {
  provide: {
    data: 1
  }
}
// 子组件 B
export default {
  inject: [&#39;data&#39;],
  mounted() {
    // 无论跨几层都能获得父组件的 data 属性
    console.log(this.data) // =&gt; 1
  }
}
</code></pre></div><h4 id="任意组件" tabindex="-1"><a class="header-anchor" href="#任意组件" aria-hidden="true">#</a> 任意组件</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>这种方式可以通过 Vuex 或者 Event Bus（Vue本身就有EventBus能力，不需要再引入EventBus） 解决，另外如果你不怕麻烦的话，可以使用这种方式解决上述所有的通信情况</p><ul><li>Vuex: UserInfo、getUserInfo、logout</li><li>Event Bus: $on不会自己销毁，需要我们手动给销毁，否则会重复触发,甚至造成内存泄漏，在keep-alive中尤为明显。</li></ul></div><h3 id="组件生命周期" tabindex="-1"><a class="header-anchor" href="#组件生命周期" aria-hidden="true">#</a> 组件生命周期</h3><p><img src="/blog/assets/img/21.862bafaf.png" alt="VUE"></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>beforeCreate 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。在当前阶段 data、methods、computed 以及 watch 上的数据和方法都不能被访问</li><li>created 实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。这里没有$el,如果非要想与 Dom 进行交互，可以通过 vm.$nextTick 来访问 Dom</li><li>beforeMount 在挂载开始之前被调用：相关的 render 函数首次被调用。</li><li>mounted 在挂载完成后发生，在当前阶段，真实的 Dom 挂载完毕，数据完成双向绑定，可以访问到 Dom 节点</li><li>beforeUpdate 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁（patch）之前。可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程</li><li>updated 发生在更新完成之后，当前阶段组件 Dom 已完成更新。要注意的是避免在此期间更改数据，因为这可能会导致无限循环的更新，该钩子在服务器端渲染期间不被调用。</li><li>beforeDestroy 实例销毁之前调用。在这一步，实例仍然完全可用。我们可以在这时进行善后收尾工作，比如清除计时器。</li><li>destroyed Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</li><li>activated keep-alive 专属，组件被激活时调用</li><li>deactivated keep-alive 专属，组件被销毁时调用</li><li>errorCaptured(错误调用)：当捕获一个来自后代组件的错误时被调用</li></ul></div><h3 id="父子组件的渲染顺序" tabindex="-1"><a class="header-anchor" href="#父子组件的渲染顺序" aria-hidden="true">#</a> 父子组件的渲染顺序</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>加载渲染过程 父beforeCreate-&gt;父created-&gt;父beforeMount-&gt;子beforeCreate-&gt;子created-&gt;子beforeMount-&gt;子mounted-&gt;父mounted</li><li>子组件更新过程 父beforeUpdate-&gt;子beforeUpdate-&gt;子updated-&gt;父updated 父组件更新过程 父beforeUpdate-&gt;父updated</li><li>销毁过程 父beforeDestroy-&gt;子beforeDestroy-&gt;子destroyed-&gt;父destroyed</li></ul></div><h3 id="keep-alive-使用场景和原理" tabindex="-1"><a class="header-anchor" href="#keep-alive-使用场景和原理" aria-hidden="true">#</a> keep-alive 使用场景和原理</h3><p>建议阅读有关<a href="https://www.jianshu.com/p/9523bb439950" target="_blank" rel="noopener noreferrer">keep-alive源码<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>keep-alive 是 Vue 内置的一个组件，可以实现组件缓存，当组件切换时不会对当前组件进行卸载。</p><ul><li>常用的两个属性 include/exclude/max，允许组件有条件的进行缓存。</li><li>两个生命周期 activated/deactivated，用来得知当前组件是否处于活跃状态。</li><li>keep-alive 的中还运用了 LRU(最近最少使用) 算法，选择最近最久未使用的组件予以淘汰。</li></ul><ol><li>在首次加载被包裹组建时，由keep-alive.js中的render函数可知，vnode.componentInstance的值是undfined，keepAlive的值是true，因为keep-alive组件作为父组件，它的render函数会先于被包裹组件执行；那么只执行到i(vnode,false)，后面的逻辑不执行；</li><li>再次访问被包裹组件时，vnode.componentInstance的值就是已经缓存的组件实例，那么会执行insert(parentElm, vnode.elm, refElm)逻辑，这样就直接把上一次的DOM插入到父元素中。</li></ol></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 大白话就是将render 返回的Vnode存储下来了，当命中的时候再取出来通过render返回</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;keep-alive&quot;</span><span class="token punctuation">,</span>
  abstract<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//抽象组件</span>

  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    include<span class="token operator">:</span> patternTypes<span class="token punctuation">,</span> <span class="token comment">//要缓存的组件</span>
    exclude<span class="token operator">:</span> patternTypes<span class="token punctuation">,</span> <span class="token comment">//要排除的组件</span>
    max<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//最大缓存数</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//缓存对象  {a:vNode,b:vNode}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//缓存组件的key集合 [a,b]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//动态监听include  exclude</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">&quot;include&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">pruneCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">&quot;exclude&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">pruneCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> slot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default<span class="token punctuation">;</span> <span class="token comment">//获取包裹的插槽默认值</span>
    <span class="token keyword">const</span> vnode<span class="token operator">:</span> VNode <span class="token operator">=</span> <span class="token function">getFirstComponentChild</span><span class="token punctuation">(</span>slot<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取第一个子组件</span>
    <span class="token keyword">const</span> componentOptions<span class="token operator">:</span> <span class="token operator">?</span>VNodeComponentOptions <span class="token operator">=</span>
      vnode <span class="token operator">&amp;&amp;</span> vnode<span class="token punctuation">.</span>componentOptions<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>componentOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// check pattern</span>
      <span class="token keyword">const</span> name<span class="token operator">:</span> <span class="token operator">?</span>string <span class="token operator">=</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>componentOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> include<span class="token punctuation">,</span> exclude <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token comment">// 不走缓存</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token comment">// not included  不包含</span>
        <span class="token punctuation">(</span>include <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>name <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>include<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token comment">// excluded  排除里面</span>
        <span class="token punctuation">(</span>exclude <span class="token operator">&amp;&amp;</span> name <span class="token operator">&amp;&amp;</span> <span class="token function">matches</span><span class="token punctuation">(</span>exclude<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//返回虚拟节点</span>
        <span class="token keyword">return</span> vnode<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> <span class="token punctuation">{</span> cache<span class="token punctuation">,</span> keys <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> key<span class="token operator">:</span> <span class="token operator">?</span>string <span class="token operator">=</span>
        vnode<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token keyword">null</span>
          <span class="token operator">?</span> <span class="token comment">// same constructor may get registered as different local components</span>
            <span class="token comment">// so cid alone is not enough (#3269)</span>
            componentOptions<span class="token punctuation">.</span>Ctor<span class="token punctuation">.</span>cid <span class="token operator">+</span>
            <span class="token punctuation">(</span>componentOptions<span class="token punctuation">.</span>tag <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">::</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentOptions<span class="token punctuation">.</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
          <span class="token operator">:</span> vnode<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//通过key 找到缓存 获取实例</span>
        vnode<span class="token punctuation">.</span>componentInstance <span class="token operator">=</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>componentInstance<span class="token punctuation">;</span>
        <span class="token comment">// make current key freshest</span>
        <span class="token function">remove</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过LRU算法把数组里面的key删掉</span>
        keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把它放在数组末尾</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> vnode<span class="token punctuation">;</span> <span class="token comment">//没找到就换存下来</span>
        keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把它放在数组末尾</span>
        <span class="token comment">// prune oldest entry  //如果超过最大值就把数组第0项删掉</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">&amp;&amp;</span> keys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> keys<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//标记虚拟节点已经被缓存</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 返回虚拟节点</span>
    <span class="token keyword">return</span> vnode <span class="token operator">||</span> <span class="token punctuation">(</span>slot <span class="token operator">&amp;&amp;</span> slot<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="nexttick-原理和使用场景" tabindex="-1"><a class="header-anchor" href="#nexttick-原理和使用场景" aria-hidden="true">#</a> $nextTick 原理和使用场景</h3><p>建议阅读有关<a href="https://juejin.cn/post/6939704519668432910#heading-4" target="_blank" rel="noopener noreferrer">nextTick源码<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><ol><li>Vue 是异步渲染,$nextTick 会在DOM渲染之后被触发回调，以获取最新的DOM节点。</li><li>页面渲染时会将data的修改做整合，多次data的修改会合并成一次DOM渲染，否则渲染过于频繁太耗性能了。</li></ol><ul><li>$nextTick内部实现了microtask队列 2.5 之前会使用<code>Mutation.Observe</code>, 2.5之后是用优雅降级<code>setImmediate</code>-<code>MessageChannel</code>-<code>Promise</code>-<code>setTimeout</code></li></ul></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">let</span> callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//把标志还原为false</span>
  <span class="token comment">// 依次执行回调</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> callbacks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbacks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> timerFunc<span class="token punctuation">;</span> <span class="token comment">//定义异步方法  采用优雅降级</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果支持promise</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> MutationObserver <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// MutationObserver 主要是监听dom变化 也是一个异步方法</span>
  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>textNode<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    characterData<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter <span class="token operator">=</span> <span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
    textNode<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> setImmediate <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果前面都不支持 判断setImmediate</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setImmediate</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 最后降级采用setTimeout</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 除了渲染watcher  还有用户自己手动调用的nextTick 一起被收集到数组</span>
  callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果多次调用nextTick  只会执行一次异步 等异步队列清空之后再把标志变为false</span>
    pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">timerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue-mixin-的使用场景和原理" tabindex="-1"><a class="header-anchor" href="#vue-mixin-的使用场景和原理" aria-hidden="true">#</a> Vue.mixin 的使用场景和原理</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>在日常的开发中，我们经常会遇到在不同的组件中经常会需要用到一些相同或者相似的代码，这些代码的功能相对独立，可以通过 Vue 的 mixin 功能抽离公共的业务逻辑，原理类似“对象的继承”，当组件初始化时会调用 mergeOptions 方法进行合并，采用策略模式针对不同的属性进行合并。当组件和混入对象含有同名选项时，这些选项将以恰当的方式进行“合并”。</p><ul><li>缺点：(Vue3推出 Compostion Api 去解决这些问题)</li></ul><ol><li>变量来源不明确，不利于阅读（只能靠全局搜索）</li><li>多mixin可能会造成命名冲突</li><li>mixin和组件可能出现多对多的关系，复杂度较高</li></ol></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">initMixin</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function-variable function">mixin</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mixin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//   合并对象</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token operator">=</span><span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span>mixin<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// src/util/index.js</span>
<span class="token comment">// 定义生命周期</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">LIFECYCLE_HOOKS</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;beforeCreate&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;beforeMount&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;mounted&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;beforeUpdate&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;updated&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;beforeDestroy&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;destroyed&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 合并策略</span>
<span class="token keyword">const</span> strats <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// mixin核心方法</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 遍历父亲</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">mergeFiled</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 父亲没有 儿子有</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parent<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mergeFiled</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//真正合并字段方法</span>
  <span class="token keyword">function</span> <span class="token function">mergeFiled</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>strats<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> strats<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 默认策略</span>
      options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> child<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">?</span> child<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">:</span> parent<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> options<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/Gordan404/blog/edit/master/docs/interview/vue.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最后更新时间: </span><span class="meta-item-info">2021-9-6 9:35:36 ├F10: PM┤</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: vae.china@foxmail.com">lishuaixingNewBee</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/blog/assets/js/runtime~app.f8d400ef.js" defer></script><script src="/blog/assets/js/9177.76fd6710.js" defer></script><script src="/blog/assets/js/app.0fe64d3a.js" defer></script>
  </body>
</html>
